{"version":3,"sources":["components/form/index.js","components/Invoice/OptionsBar.js","components/Invoice/Header.js","components/Invoice/ItemsList/Headings.js","components/Invoice/ItemsList/Item.js","components/Invoice/ItemsList/index.js","class/ItemData.js","class/InvoiceData.js","helpers.js","components/Invoice/Results.js","components/Invoice/Footer.js","components/elements/Hr.js","components/Invoice/Form.js","components/Invoice/PreviewMenu.js","components/Invoice/Preview.js","components/Invoice/index.js","App.js","serviceWorker.js","index.js"],"names":["Input","_ref","name","id","value","changeHandler","domProps","Object","objectWithoutProperties","react_default","a","createElement","className","assign","type","onChange","e","Textarea","_ref2","Select","_ref3","tabs","map","tab","index","key","concat","label","Label","_ref4","target","icon","htmlFor","File","_ref5","OptionsBar","options","optionsChangeHandler","types","typeChangeHandler","form_Select","detailed","withTaxes","Header","from","to","number","date","form_Label","form_Textarea","form_File","form_Input","Headings","verbose","headings","verboseOnly","withTaxesOnly","size","filter","heading","Item","withTax","data","blurHandler","data-id","data-field","quantity","onBlur","title","price","disabled","toFixed","tax","onClick","ItemsList","items","Headings_Headings","item","Item_Item","ItemData","arguments","length","undefined","classCallCheck","this","shortid","InvoiceData","props","toConsumableArray","meta","objectSpread","Date","toLocaleDateString","terms","clone","obj","JSON","parse","stringify","isEmptyObject","o","keys","forEach","Boolean","getTotals","totalTaxIncluded","totalTaxExcluded","totalTaxes","subTotals","subTotalTaxExcluded","subTotalTax","subTotalTaxIncluded","getSubTotals","ResultRow","color","Results","_getTotals","Results_ResultRow","Footer","Hr","InvoiceForm","_Component","_this","possibleConstructorReturn","getPrototypeOf","call","metaChangeHandler","state","split","setState","cloneItems","includes","itemsChangeHandler","action","addItem","getAttribute","field","updateItem","targetId","removeItem","itemsBlurHandler","trim","isNaN","push","find","invoice","inherits","createClass","prevState","updateHandler","OptionsBar_OptionsBar","Header_Header","companyTitle","Hr_Hr","ItemsList_ItemsList","Results_Results","Footer_Footer","Component","PreviewMenu","closePreview","filename","objectUrl","style","paddingBottom","href","download","Preview","embedPdf","axios","headers","Content-Type","Accept","responseType","then","res","blob","Blob","window","URL","createObjectURL","catch","err","console","log","scrollTo","PreviewMenu_PreviewMenu","Invoice","updateInvoice","invoices","currentInvoice","saveInvoices","newInvoice","newInvoiceType","count","countInvoices","setNewInvoiceType","selectInvoice","removeInvoice","leaveInvoice","storage","_","loadInvoices","openPreview","showPreview","hidePreview","invoiceTypes","_this2","error","_this3","Preview_Preview","defaultValue","cursor","Form_InvoiceForm","App","Invoice_Invoice","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e0d2e7b8.chunk.js","sourcesContent":["import React from 'react';\n\nimport './form.css';\n\nexport const Input = ({ name, id, value, changeHandler, ...domProps }) => {\n  return (\n    <div className=\"control\">\n      <input\n        id={id}\n        name={name}\n        type=\"text\"\n        className=\"input\"\n        onChange={changeHandler ? changeHandler : (e) => { }}\n        value={value}\n        {...domProps} />\n    </div>\n  )\n}\n\nexport const Textarea = ({ name, id, value, changeHandler, ...domProps }) => {\n  return (\n    <div className=\"control\">\n      <textarea\n        className=\"textarea\"\n        name={name}\n        id={id}\n        onChange={changeHandler ? changeHandler : (e) => { }}\n        value={value}\n        {...domProps}></textarea>\n    </div>\n  )\n}\n\nexport const Select = ({ name, value, changeHandler, tabs, ...domProps }) => {\n  return (\n    <div className=\"select is-fullwidth\">\n      <select\n        name={name}\n        value={value}\n        onChange={changeHandler}\n        {...domProps}>\n        {\n          tabs.map((tab, index) => {\n            return (\n              <option\n                key={`options-${index}`}\n                value={tab.value}>{tab.label}</option>\n            )\n          })\n        }\n      </select>\n    </div>\n  )\n}\n\nexport const Label = ({ target, label, icon }) => {\n  return (\n    <label\n      htmlFor={target}\n      className=\"label\">\n      <span className=\"icon is-small has-text-info\">\n        <i className={`fas fa-${icon}`}></i>\n      </span>\n      <span>{` ${label}`}</span>\n    </label>\n  )\n}\n\nexport const File = ({ name, label }) => {\n  return (\n    <div className=\"file has-name is-fullwidth\">\n      <label className=\"file-label\">\n        <input\n          className=\"file-input\"\n          type=\"file\"\n          name={name} />\n        <span className=\"file-cta\">\n          <span className=\"file-icon\">\n            <i className=\"fas fa-upload\"></i>\n          </span>\n          <span className=\"file-label\">{label}</span>\n        </span>\n        <span className=\"file-name\"></span>\n      </label>\n    </div>\n  )\n}\n\n","import React from 'react';\n\nimport { Select } from '../form'\n\nexport const OptionsBar = ({\n  options,\n  optionsChangeHandler,\n  types,\n  type,\n  typeChangeHandler\n}) => {\n  return (\n    <div className=\"level\">\n      <div className=\"level-left\">\n        <div className=\"level-item\">\n          <div className=\"field is-horizontal\">\n            <div className=\"field-label is-normal\">\n              <label className=\"label\">Formulaire</label>\n            </div>\n            <div className=\"field-body\">\n              <div className=\"field\">\n                <div className=\"control is-expanded\">\n                  <Select\n                    name=\"input-type\"\n                    value={type}\n                    changeHandler={typeChangeHandler}\n                    tabs={types.map(type => ({ value: type, label: type }))} />\n                </div>\n              </div>\n              <div className=\"field\">\n                <div className=\"control is-expanded\">\n                  <Select\n                    name=\"input-detailed\"\n                    value={options.detailed}\n                    changeHandler={optionsChangeHandler}\n                    tabs={[\n                      { value: 'false', label: 'Simple' },\n                      { value: 'true', label: 'Détaillé' },\n                    ]} />\n                </div>\n              </div>\n              <div className=\"field\">\n                <div className=\"control is-expanded\">\n                  <Select\n                    name=\"input-withTaxes\"\n                    value={options.withTaxes}\n                    changeHandler={optionsChangeHandler}\n                    tabs={[\n                      { value: 'false', label: 'Sans Taxes' },\n                      { value: 'true', label: 'Avec Taxes' },\n                    ]} />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"level-right\"></div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Input, Textarea, Label, File } from '../form';\n\nexport const Header = ({ from, to, number, date, changeHandler, type }) => {\n  return (\n    <div className=\"columns is-multiline\">\n      {/* ---------------------------------------------- */}\n      {/* Field: From */}\n      <div className=\"column is-6\">\n        <div className=\"field\">\n          <Label\n            target=\"input-from\"\n            label=\"De\"\n            icon=\"home\" />\n          <Textarea\n            name=\"input-from\"\n            id=\"input-from\"\n            changeHandler={changeHandler}\n            value={from} />\n        </div>\n      </div>\n      {/* ---------------------------------------------- */}\n      {/* Field: Logo */}\n      <div className=\"column is-6\">\n        <div className=\"field\">\n          <Label\n            target=\"\"\n            label=\"Logo\"\n            icon=\"image\" />\n          <File name=\"file-input\" label=\"Ajouter une image\" />\n        </div>\n      </div>\n      {/* ---------------------------------------------- */}\n      {/* Field: To */}\n      <div className=\"column is-6\">\n        <div className=\"field\">\n          <Label\n            target=\"input-to\"\n            label=\"Facturé à\"\n            icon=\"handshake\" />\n          <Textarea\n            name=\"input-to\"\n            id=\"input-to\"\n            changeHandler={changeHandler}\n            value={to} />\n        </div>\n      </div>\n      {/* ---------------------------------------------- */}\n      {/* Number and Date fields */}\n      <div className=\"column is-6\">\n        <div className=\"columns is-multiline\">\n          {/* Field: Number */}\n          <div className=\"column is-12\">\n            <div className=\"field\">\n              <Label\n                target=\"input-number\"\n                label={`${type} n°`}\n                icon=\"search\" />\n              <Input\n                name=\"input-number\"\n                id=\"input-number\"\n                changeHandler={changeHandler}\n                value={number} />\n            </div>\n          </div>\n          {/* ---------------------------------------------- */}\n          {/* Field: Date */}\n          <div className=\"column is-12\">\n            <div className=\"field\">\n              <Label\n                target=\"input-date\"\n                label=\"Date\"\n                icon=\"calendar-day\" />\n              <Input\n                name=\"input-date\"\n                id=\"input-date\"\n                changeHandler={changeHandler}\n                value={date} />\n            </div>\n          </div>\n          {/* ---------------------------------------------- */}\n        </div>\n      </div>\n      {/* ---------------------------------------------- */}\n    </div>\n  )\n}","import React from 'react';\n\nimport { Label } from '../../form';\n\nexport const Headings = ({ verbose, withTaxes }) => {\n  // Filter the headings to display\n  // depending on the Invoice options\n  const headings = [\n    { verboseOnly: true, withTaxesOnly: false, label: 'Qté', icon: 'sort-amount-up', size: 1 },\n    { verboseOnly: false, withTaxesOnly: false, label: 'Désignation', icon: 'tag', size: verbose ? 4 : 6 },\n    { verboseOnly: false, withTaxesOnly: false, label: `Prix${verbose ? ' Unit.' : ''}${withTaxes ? ' HT' : ''}`, icon: 'euro-sign', size: 2 },\n    { verboseOnly: true, withTaxesOnly: false, label: `${'Montant'}${withTaxes ? ' HT' : ''}`, icon: 'euro-sign', size: 2 },\n    { verboseOnly: false, withTaxesOnly: true, label: 'TVA', icon: 'percentage', size: verbose ? 2 : 3 },\n  ].filter(heading => {\n    return (!heading.verboseOnly || (heading.verboseOnly && verbose))\n      && (!heading.withTaxesOnly || (heading.withTaxesOnly && withTaxes));\n  });\n  return (\n    // Headings is a direct child of ItemsList\n    // It is nested within the ItemsList container\n    // It is displayed in a full row\n    <div className=\"column is-12\">\n      <div className=\"columns\">\n        {\n          headings.map((heading, index) => {\n            return (\n              <div\n                className={`column is-${heading.size}`}\n                key={`item-heading-${index}`}>\n                <Label icon={heading.icon} label={heading.label} />\n              </div>\n            )\n          })\n        }\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Textarea, Input } from '../../form';\n\nexport const Item = ({ verbose, withTax, data, changeHandler, blurHandler }) => {\n  return (\n    // Items are childs of ItemsList\n    // Each item is displayed in a full row within the ItemsList container\n    <div className=\"column is-12 animated fadeIn fast\">\n      <div className=\"columns\">\n        {/* ---------------------------------------------- */}\n        {/* quantity field */}\n        {\n          verbose &&\n          <div className=\"column is-1\">\n            <Input\n              data-id={`${data.id}`}\n              data-field={`quantity`}\n              value={data.quantity}\n              changeHandler={(e) => { changeHandler(e, 'update') }}\n              onBlur={blurHandler} />\n          </div>\n        }\n        {/* ---------------------------------------------- */}\n        {/* title field */}\n        <div className={`column is-${verbose ? '4' : '6'}`}>\n          <Textarea\n            data-id={`${data.id}`}\n            data-field={`title`}\n            value={data.title}\n            changeHandler={(e) => { changeHandler(e, 'update') }}\n            onBlur={blurHandler} />\n        </div>\n        {/* ---------------------------------------------- */}\n        {/* price field */}\n        <div className=\"column is-2\">\n          <Input\n            data-id={`${data.id}`}\n            data-field={`price`}\n            value={data.price}\n            changeHandler={(e) => { changeHandler(e, 'update') }}\n            onBlur={blurHandler} />\n        </div>\n        {/* ---------------------------------------------- */}\n        {/* total(quantity * price) field, display only */}\n        {\n          verbose &&\n          <div className=\"column is-2\">\n            <Input\n              disabled\n              value={(data.quantity * data.price).toFixed(2)}\n              changeHandler={(e) => { }} />\n          </div>\n        }\n        {/* ---------------------------------------------- */}\n        {/* tax field */}\n        {\n          withTax &&\n          <div className=\"column is-2\">\n            <Input\n              data-id={`${data.id}`}\n              data-field={`tax`}\n              value={data.tax}\n              changeHandler={(e) => { changeHandler(e, 'update') }}\n              onBlur={blurHandler} />\n          </div>\n        }\n        {/* ---------------------------------------------- */}\n        {/* delete item button */}\n        <div className=\"column is-1\">\n          <button\n            data-id={`${data.id}`}\n            onClick={(e) => changeHandler(e, 'remove')}\n            className=\"button is-danger is-fullwidth\">\n            <span\n              data-id={`${data.id}`}\n              className=\"icon\">\n              <i\n                data-id={`${data.id}`}\n                className=\"fas fa-times\"></i>\n            </span>\n          </button>\n        </div>\n        {/* ---------------------------------------------- */}\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Headings } from './Headings';\nimport { Item } from './Item';\n\nexport const ItemsList = ({ detailed, withTaxes, changeHandler, blurHandler, items }) => {\n  return (\n    // ItemsList is a child of Invoice Form\n    // It is nested within the Invoice container\n    // It can be displayed on multiple rows\n    <div className=\"columns is-multiline\">\n      {/* ---------------------------------------------- */}\n      {/* List Headings */}\n      <Headings\n        verbose={detailed}\n        withTaxes={withTaxes} />\n      {/* ---------------------------------------------- */}\n      {/* Items */}\n      {\n        items.map(item => {\n          return (\n            <Item\n              key={item.id}\n              data={item}\n              changeHandler={changeHandler}\n              verbose={detailed}\n              withTax={withTaxes}\n              blurHandler={blurHandler}\n            />\n          )\n        })\n      }\n      {/* ---------------------------------------------- */}\n      {/* Add Item button */}\n      <div className=\"column is-12\">\n        <button\n          onClick={(e) => changeHandler(e, 'add')}\n          className=\"button is-link is-fullwidth\">\n          <span className=\"icon\">\n            <i className=\"fas fa-plus\"></i>\n          </span>\n          <span>Ajouter un article</span>\n        </button>\n      </div>\n      {/* ---------------------------------------------- */}\n    </div>\n  )\n}","import * as shortid from 'shortid';\n\nexport class ItemData {\n  constructor(data = { id: null, title: '', price: 0, tax: 0, quantity: 1 }) {\n    this.id = data.id || shortid.generate();\n    this.title = data.title;\n    this.price = data.price;\n    this.tax = data.tax;\n    this.quantity = data.quantity;\n  }\n}","import * as shortid from 'shortid';\n\nexport class InvoiceData {\n  constructor(props = {}) {\n    this.id = props.id || shortid.generate();\n    this.type = props.type || 'Facture';\n    this.types = ['Facture', 'Devis'];\n    this.items = props.items ? [...props.items] : [];\n    this.meta = props.meta ? { ...props.meta } : {\n      date: (new Date()).toLocaleDateString(),\n      from: '',\n      to: '',\n      number: '',\n      terms: ''\n    };\n    this.options = props.options ? { ...props.options } : {\n      detailed: false,\n      withTaxes: false\n    };\n  }\n}","// eslint-disable-next-line\nimport { ItemData } from './class/ItemData';\n// eslint-disable-next-line\nimport { InvoiceData } from './class/InvoiceData';\n\n/**\n * \n * @param {any} obj \n */\nexport function clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * \n * @param {object} o \n */\nexport function isEmptyObject(o) {\n  let props = 0;\n  Object.keys(o).forEach(key => props++);\n  return !Boolean(props);\n}\n\n/**\n * \n * @param {ItemData} item\n * @returns {{subTotalTaxExcluded, subTotalTaxIncluded, subTotalTax}} \n */\nexport function getSubTotals(item) {\n  const subTotalTaxExcluded = +item.quantity * +item.price;\n  const subTotalTax = subTotalTaxExcluded * (+item.tax / 100);\n  const subTotalTaxIncluded = subTotalTaxExcluded + subTotalTax;\n  return {\n    subTotalTaxExcluded,\n    subTotalTaxIncluded,\n    subTotalTax\n  }\n}\n\n/**\n * \n * @param {[ItemData]} items\n * @returns {{totalTaxExcluded: number, totalTaxIncluded: number, totalTaxes: number}} \n */\nexport function getTotals(items) {\n  let totalTaxIncluded = 0;\n  let totalTaxExcluded = 0;\n  let totalTaxes = 0;\n  if (items.length) {\n    items.forEach(item => {\n      const subTotals = getSubTotals(item);\n      totalTaxExcluded += subTotals.subTotalTaxExcluded;\n      totalTaxIncluded += subTotals.subTotalTaxIncluded;\n      totalTaxes += subTotals.subTotalTax;\n    });\n  }\n  return {\n    totalTaxExcluded,\n    totalTaxIncluded,\n    totalTaxes\n  };\n}\n\n/**\n * \n * @param {string} text\n * @returns {string} \n */\nexport function getCompanyTitle(text) {\n  return text.split('\\n')[0];\n}\n\n/**\n * \n * @param {string} text\n * @returns {string} \n */\nexport function getCompanyInfo(text) {\n  return text.split('\\n').slice(1).join('\\n');\n}\n\n/**\n * \n * @param {[InvoiceData]} invoices \n * @returns {object}\n */\nexport function countInvoices(invoices) {\n  let count = {};\n  Object.keys(invoices).forEach(id => {\n    const invoice = invoices[id];\n    const type = invoice.type;\n    if (type in count) {\n      count[type]++;\n    } else {\n      count[type] = 1;\n    }\n  });\n  return count;\n}","import React from 'react';\n\nimport { getTotals } from '../../helpers';\n\nconst ResultRow = ({ label, value, size, color }) => {\n  return (\n    // Result Row is a child of Results\n    // It is nested within the Result container\n    // It is displayed in a full row\n    <div className=\"column is-12\">\n      <div className={`columns has-text-${color}`}>\n        <div className=\"column is-4\"></div>\n        <div className=\"column is-4 has-text-right\">\n          <span className={`is-size-${size}`}>{label}</span>\n        </div>\n        <div className=\"column is-4 has-text-right\">\n          <span className={`is-size-${size}`}>{value} &euro;</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport const Results = ({ withTax, items }) => {\n  const {\n    totalTaxExcluded,\n    totalTaxIncluded,\n    totalTaxes\n  } = getTotals(items);\n  return (\n    // Results is a child of Invoice\n    // It is nested within the Invoice container\n    // It can be displayed in multiple rows\n    <div className=\"columns is-multiline\">\n      {/* ---------------------------------------------------------------- */}\n      {/* display total(tax excluded) */}\n      {\n        withTax && <ResultRow\n          label=\"TOTAL HT\"\n          value={totalTaxExcluded.toFixed(2)}\n          size=\"5\"\n          color=\"grey-dark\" />\n      }\n      {/* ---------------------------------------------------------------- */}\n      {/* display total tax */}\n      {\n        withTax && <ResultRow\n          label=\"TVA\"\n          value={totalTaxes.toFixed(2)}\n          size=\"6\"\n          color=\"grey\" />\n      }\n      {/* ---------------------------------------------------------------- */}\n      {/* display total (tax included) */}\n      <ResultRow\n        label={`TOTAL${withTax ? ' TTC' : ''}`}\n        value={totalTaxIncluded.toFixed(2)}\n        size=\"4\"\n        color=\"black-ter\" />\n      {/* ---------------------------------------------------------------- */}\n    </div>\n  )\n}","import React from 'react';\n\nimport { Label, Textarea } from '../form';\n\nexport const Footer = ({ terms, changeHandler }) => {\n  return (\n    <div className=\"columns is-multiline\">\n      {/* terms field */}\n      <div className=\"column is-12\">\n        <div className=\"field\">\n          <Label\n            target=\"input-terms\"\n            icon=\"building\"\n            label=\"Conditions et modalités de paiement\" />\n          <Textarea\n            name=\"input-terms\"\n            id=\"input-terms\"\n            value={terms}\n            changeHandler={changeHandler} />\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nexport const Hr = () => {\n  return (\n    // Hr is a horizontal line\n    // It separate two rows\n    // It could be nested within any container\n    // It is displayed in a full row \n    <div className=\"columns no-print\">\n      <div className=\"column is-12\">\n        <hr />\n      </div>\n    </div>\n  )\n}","import React, { Component } from 'react';\n\nimport { OptionsBar } from './OptionsBar';\nimport { Header } from './Header';\nimport { ItemsList } from './ItemsList';\nimport { Results } from './Results';\nimport { Footer } from './Footer';\nimport { Hr } from '../elements/Hr';\n\nimport { ItemData } from '../../class/ItemData';\nimport { clone } from '../../helpers';\n\nexport class InvoiceForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: null,\n      type: 'Facture',\n      types: ['Facture', 'Devis'],\n      meta: {\n        from: '',\n        to: '',\n        number: '',\n        date: '',\n        terms: ''\n      },\n      options: {\n        detailed: false,\n        withTaxes: false\n      },\n      items: [],\n    }\n    this.state = clone(this.props.invoice);\n  }\n\n  UNSAFE_componentWillReceiveProps(props) {\n    if (props.invoice.id !== this.state.id) {\n      this.setState({ ...clone(props.invoice) });\n    }\n  }\n\n  shouldComponentUpdate(props, state) {\n    if (JSON.stringify(state) === JSON.stringify(this.state)) {\n      return false;\n    }\n    return true;\n  }\n\n  componentDidUpdate(props, prevState) {\n    this.props.updateHandler(clone(this.state));\n  }\n\n  metaChangeHandler = (e) => {\n    const meta = { ...this.state.meta };\n    const name = e.target.name.split('-')[1];\n    meta[name] = e.target.value;\n    this.setState({ meta });\n  }\n\n  optionsChangeHandler = (e) => {\n    const options = { ...this.state.options };\n    const name = e.target.name.split('-')[1];\n    const value = e.target.value === 'true' ? true : false;\n    options[name] = value;\n    const items = this.cloneItems(this.state.items);\n    items.forEach(item => {\n      item.quantity = !options.detailed ? 1 : item.quantity;\n      item.tax = !options.withTaxes ? 0 : item.tax;\n    })\n    this.setState({ options, items });\n  }\n\n  typeChangeHandler = (e) => {\n    const type = e.target.value;\n    if (this.state.types.includes(type)) {\n      this.setState({ type });\n    }\n  }\n\n  itemsChangeHandler = (e, action) => {\n    switch (action) {\n      case 'add':\n        this.addItem();\n        break;\n      case 'update':\n        const id = e.target.getAttribute('data-id');\n        const field = e.target.getAttribute('data-field');\n        const value = e.target.value;\n        this.updateItem(id, field, value);\n        break;\n      case 'remove':\n        const targetId = e.target.getAttribute('data-id');\n        this.removeItem(targetId);\n        break\n      default:\n    }\n  }\n\n  itemsBlurHandler = (e) => {\n    const id = e.target.getAttribute('data-id');\n    const field = e.target.getAttribute('data-field');\n    let value = e.target.value;\n    switch (field) {\n      case 'title':\n        value = value.trim();\n        break;\n      case 'quantity':\n      case 'tax':\n      case 'price':\n        value = !isNaN(value) ? +(+value).toFixed(2) : 0;\n        break;\n      default:\n    }\n    this.updateItem(id, field, value);\n  }\n\n  addItem = () => {\n    let items = this.cloneItems(this.state.items);\n    items.push(new ItemData());\n    this.setState({ items: this.cloneItems(items) });\n  }\n\n  updateItem = (id, field, value) => {\n    const items = this.cloneItems(this.state.items);\n    const item = items.find(data => data.id === id);\n    item[field] = value;\n    this.setState({ items: this.cloneItems(items) });\n  }\n\n  removeItem = (id) => {\n    let items = this.cloneItems(this.state.items);\n    items = items.filter(item => item.id !== id);\n    this.setState({ items: this.cloneItems(items) });\n  }\n\n  cloneItems = (items) => {\n    return items.map(data => new ItemData(data));\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"columns is-multiline\">\n          <div className=\"column is-12\">\n            <div className=\"box animated slideInDown\">\n              <OptionsBar\n                type={this.state.type}\n                types={this.state.types}\n                options={this.state.options}\n                optionsChangeHandler={this.optionsChangeHandler}\n                typeChangeHandler={this.typeChangeHandler} />\n            </div>\n          </div>\n          <div className=\"column is-12\">\n            <div className=\"box animated fadeIn\">\n              <Header\n                companyTitle={this.state.companyTitle}\n                type={this.state.type}\n                from={this.state.meta.from}\n                to={this.state.meta.to}\n                number={this.state.meta.number}\n                date={this.state.meta.date}\n                changeHandler={this.metaChangeHandler} />\n              <Hr />\n              <ItemsList\n                detailed={this.state.options.detailed}\n                withTaxes={this.state.options.withTaxes}\n                changeHandler={this.itemsChangeHandler}\n                blurHandler={this.itemsBlurHandler}\n                items={this.state.items} />\n              <Results\n                withTax={this.state.options.withTaxes}\n                items={this.state.items} />\n              <Hr />\n              <Footer\n                terms={this.state.meta.terms}\n                changeHandler={this.metaChangeHandler} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}","import React from 'react';\n\nexport const PreviewMenu = ({ closePreview, filename, objectUrl }) => {\n  return (\n    <div className=\"preview-toolbar no-print\">\n      <div className=\"columns\">\n        <div className=\"column is-12\" style={{ paddingBottom: 0 }}>\n          <div className=\"level\">\n            <div className=\"level-left\">\n              <div className=\"level-item\">\n                <button\n                  className=\"button is-dark is-outlined\"\n                  onClick={closePreview}>\n                  <span className=\"icon is-small\">\n                    <i className=\"fas fa-arrow-left\"></i>\n                  </span>\n                  <span>Retour</span>\n                </button>\n              </div>\n              <div className=\"level-item\">\n                <a\n                  href={objectUrl}\n                  download={filename}\n                  className={`button is-link is-outlined ${!filename ? 'is-loading' : ''}`}>\n                  <span className=\"icon is-small\">\n                    <i className=\"fas fa-file-pdf\"></i>\n                  </span>\n                  <span>Télecharger</span>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <hr />\n    </div>\n  )\n}","import React, { Component } from 'react';\n\nimport * as axios from 'axios';\n\nimport { PreviewMenu } from './PreviewMenu';\n\nexport class Preview extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filename: null,\n      objectUrl: null\n    }\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    if (!this.state.filename) {\n      this.embedPdf();\n    }\n  }\n\n  embedPdf = () => {\n    const invoice = this.props.invoice;\n    axios.post('/api/html2pdf', { data: invoice }, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/pdf'\n      },\n      responseType: \"blob\"\n    }).then(res => {\n      const filename = `${invoice.type}-${invoice.meta.number}.pdf`;\n      const blob = new Blob([res.data], { type: 'application/pdf' });\n      const objectUrl = window.URL.createObjectURL(blob);\n      this.setState({ filename, objectUrl });\n    }).catch(err => {\n      console.log(err);\n    })\n  }\n\n  render() {\n\n    return (\n      <div className=\"container\">\n        <PreviewMenu\n          closePreview={this.props.closePreview}\n          filename={this.state.filename}\n          objectUrl={this.state.objectUrl} />\n        <div className=\"columns is-multiline\">\n          {\n            !this.state.filename &&\n            <div className=\"preview-spinner\">\n              Chargement ...\n            </div>\n          }\n          {\n            this.state.filename &&\n            <object\n              id=\"mediaObject\"\n              data={this.state.objectUrl}\n              type=\"application/pdf\"\n              name={this.state.filename}>\n              alt: <a\n                href={this.state.objectUrl}\n                download={this.state.filename}>{this.state.filename}</a>\n            </object>\n          }\n        </div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\n\nimport * as storage from 'localforage';\n\nimport { InvoiceForm } from './Form';\nimport { Preview } from './Preview';\nimport { Hr } from '../elements/Hr';\nimport { Select } from '../form';\n\nimport { InvoiceData } from '../../class/InvoiceData';\nimport {\n  isEmptyObject,\n  clone,\n  countInvoices,\n  getCompanyTitle,\n  getTotals\n} from '../../helpers';\n\nexport class Invoice extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showPreview: false,\n      currentInvoice: null,\n      invoices: {}\n    }\n    // type of the invoice that will be created\n    // used to generate an incremental invoice number\n    this.newInvoiceType = null;\n    this.invoiceTypes = (new InvoiceData()).types;\n  }\n\n  componentDidMount() {\n    if (isEmptyObject(this.state.invoices)) {\n      this.loadInvoices().then(invoices => {\n        if (invoices && typeof invoices === 'object' && !isEmptyObject(invoices)) {\n          this.setState({ invoices: clone(invoices) });\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n  }\n\n  updateInvoice = (invoice) => {\n    const id = invoice.id;\n    const invoices = clone(this.state.invoices);\n    invoices[id] = clone(invoice);\n    this.setState({ invoices, currentInvoice: clone(invoice) }, () => {\n      this.saveInvoices();\n    });\n  }\n\n  newInvoice = () => {\n    const invoice = new InvoiceData();\n    if (this.newInvoiceType) {\n      invoice.type = this.newInvoiceType;\n    }\n    const number = countInvoices(this.state.invoices)[invoice.type] || 0;\n    invoice.meta.number = number + 1;\n    this.setState({ currentInvoice: invoice });\n  }\n\n  setNewInvoiceType = (e) => {\n    const type = e.target.value;\n    if (Boolean(type)) {\n      this.newInvoiceType = type;\n    }\n  }\n\n  selectInvoice = (e) => {\n    const id = e.target.getAttribute('data-id');\n    const invoice = { ...this.state.invoices[id] };\n    if (!invoice) {\n      return;\n    }\n    this.setState({ currentInvoice: clone(invoice) });\n  }\n\n  removeInvoice = () => {\n    const id = this.state.currentInvoice.id;\n    const invoices = clone(this.state.invoices);\n    delete invoices[id];\n    this.setState({ invoices, currentInvoice: null }, () => {\n      this.saveInvoices();\n    });\n  }\n\n  leaveInvoice = () => {\n    this.setState({ currentInvoice: null }, () => {\n      this.saveInvoices();\n    });\n  }\n\n  saveInvoices = (invoice) => {\n    storage.setItem('invoices', clone(this.state.invoices)).then(_ => {\n      console.log(`Invoices saved`);\n    }).catch(err => {\n      console.log('Unableto save invoices\\n', err);\n    })\n  }\n\n  loadInvoices = () => {\n    return storage.getItem('invoices');\n  }\n\n  openPreview = () => {\n    this.setState({ showPreview: true });\n  }\n\n  hidePreview = () => {\n    this.setState({ showPreview: false });\n  }\n\n  render() {\n    const invoices = this.state.invoices;\n    return (\n      <section>\n\n        {\n          (this.state.currentInvoice && this.state.showPreview) &&\n          <Preview\n            closePreview={this.hidePreview}\n            invoice={this.state.currentInvoice} />\n        }\n\n        {\n          !this.state.showPreview &&\n          <div id=\"main\">\n            {/* new document menu*/}\n            {/* Hide when an invoice is selected / created */}\n            {\n              (!this.state.showPreview && !this.state.currentInvoice) &&\n              <div className=\"container\" >\n                <div className=\"columns\">\n                  <div className=\"column is-12\">\n                    <div className=\"level\">\n                      <div className=\"level-left\"></div>\n                      <div className=\"level-right\">\n                        <div className=\"level-item\">\n                          <div className=\"field has-addons\">\n                            <div className=\"control\">\n                              <button className=\"button is-static\">\n                                Nouveau\n                              </button>\n                            </div>\n                            <div className=\"control is-expanded\">\n                              <Select\n                                onChange={this.setNewInvoiceType}\n                                defaultValue=''\n                                name=\"newInvoiceType\"\n                                tabs={\n                                  this.invoiceTypes.map(type => {\n                                    return { value: type, label: type }\n                                  }).concat({ value: '', label: 'Document' })\n                                } />\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"level-item\">\n                          <button\n                            onClick={this.newInvoice}\n                            className=\"button is-primary\">\n                            <span className=\"icon is-small\">\n                              <i className=\"fas fa-plus\"></i>\n                            </span>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <Hr />\n              </div>\n            }\n\n            {/* invoices list: select an invoice */}\n            {/* Hide when an invoice is selected / created */}\n            {\n              (!isEmptyObject(this.state.invoices) && !this.state.currentInvoice) &&\n              <div className=\"container\">\n                <div className=\"columns\">\n                  <div className=\"column is-12\">\n                    <div className=\"box\">\n                      <table className=\"table is-striped is-hoverable is-fullwidth\">\n                        <thead>\n                          <tr>\n                            <th className=\"has-text-centered\">Client</th>\n                            <th>Document</th>\n                            <th>Nombre</th>\n                            <th>Date</th>\n                            <th>Montant</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {\n                            Object.keys(invoices).map(id => {\n                              const invoice = invoices[id];\n                              return (\n                                <tr\n                                  style={{ cursor: 'pointer' }}\n                                  onClick={this.selectInvoice}\n                                  data-id={id}\n                                  key={id}>\n                                  <td data-id={id}>{getCompanyTitle(invoice.meta.to)}</td>\n                                  <td data-id={id}>{invoice.type}</td>\n                                  <td data-id={id}>{invoice.meta.number}</td>\n                                  <td data-id={id}>{invoice.meta.date}</td>\n                                  <td data-id={id}>\n                                    {\n                                      getTotals(invoice.items)\n                                        .totalTaxIncluded\n                                        .toFixed(2)\n                                    } &euro;\n                                  </td>\n                                </tr>\n                              )\n                            })\n                          }\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            }\n\n            {/* invoice form for both edition and new form */}\n            {/* show when an invoice is selected / created */}\n            {\n              this.state.currentInvoice &&\n              <InvoiceForm\n                key={this.state.currentInvoice.id}\n                updateHandler={this.updateInvoice}\n                invoice={this.state.currentInvoice} />\n            }\n\n            {/* TODO: add this component to the invoice form */}\n            {/* leave invoice form, show preview, delete invoice menu  */}\n            {/* Only show when an invoice is selected, under the invoice form */}\n            {\n              this.state.currentInvoice &&\n              <div className=\"container\">\n                <div className=\"columns\">\n                  <div className=\"column is-12\">\n                    <div className=\"box\">\n                      <div className=\"level\">\n                        <div className=\"level-left\">\n                          <div className=\"level-item\">\n                            <button\n                              onClick={this.leaveInvoice}\n                              className=\"button is-dark\">\n                              <span className=\"icon is-small\">\n                                <i className=\"fas fa-arrow-left\"></i>\n                              </span>\n                              <span>Retour</span>\n                            </button>\n                          </div>\n                          <div className=\"level-item\">\n                            <button\n                              onClick={this.openPreview}\n                              className=\"button is-info\">\n                              <span className=\"icon is-small\">\n                                <i className=\"fas fa-eye\"></i>\n                              </span>\n                              <span>Aperçu</span>\n                            </button>\n                          </div>\n                        </div>\n                        <div className=\"level-right\">\n                          <div className=\"level-item\">\n                            <button\n                              onClick={this.removeInvoice}\n                              className=\"button is-danger\">\n                              <span className=\"icon is-small\">\n                                <i className=\"fas fa-trash-alt\"></i>\n                              </span>\n                              <span>Supprimer</span>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            }\n          </div>\n        }\n      </section>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport './App.css';\n\nimport { Invoice } from './components/Invoice';\n\nclass App extends Component {\n  render() {\n    return (\n      <section className=\"section\">\n        <Invoice />\n      </section>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}