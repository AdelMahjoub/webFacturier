{"version":3,"sources":["components/Invoice/InvoicePreview/PreviewMenu.js","components/Invoice/InvoicePreview/index.js","components/form/index.js","components/Invoice/InvoiceForm/FormOptions.js","components/Invoice/InvoiceForm/FormHeader.js","components/Invoice/InvoiceForm/FormItems/Headings.js","components/Invoice/InvoiceForm/FormItems/Item.js","components/Invoice/InvoiceForm/FormItems/index.js","class/InvoiceData.js","components/Invoice/InvoiceForm/FormResults.js","components/Invoice/InvoiceForm/FormFooter.js","components/Invoice/InvoiceForm/FormNavs.js","components/elements/Hr.js","class/ItemData.js","helpers.js","components/Invoice/InvoiceForm/index.js","components/Invoice/Menu.js","components/Invoice/List.js","components/Invoice/index.js","App.js","serviceWorker.js","index.js"],"names":["PreviewMenu","_ref","closePreview","filename","objectUrl","react_default","a","createElement","className","style","paddingBottom","onClick","href","download","concat","InvoicePreview","_Component","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","embedPdf","invoice","axios","data","headers","Content-Type","Accept","responseType","then","res","type","meta","number","blob","Blob","window","URL","createObjectURL","setState","catch","err","console","log","state","inherits","createClass","key","value","scrollTo","PreviewMenu_PreviewMenu","id","name","Component","Input","changeHandler","domProps","objectWithoutProperties","assign","onChange","e","Textarea","_ref2","Select","_ref3","tabs","map","tab","index","label","Label","_ref4","target","icon","htmlFor","File","_ref5","FormOptions","options","optionsChangeHandler","types","typeChangeHandler","form_Select","detailed","withTaxes","FormHeader","from","to","date","form_Label","form_Textarea","form_File","form_Input","Headings","headings","detailedOnly","withTaxesOnly","size","filter","heading","Item","withTax","blurHandler","data-id","data-field","quantity","onBlur","title","price","disabled","toFixed","tax","FormItems","items","Headings_Headings","item","Item_Item","InvoiceData","arguments","length","undefined","shortid","toConsumableArray","objectSpread","Date","toLocaleDateString","terms","subTotalTaxExcluded","subTotalTax","subTotalTaxIncluded","totalTaxIncluded","totalTaxExcluded","totalTaxes","forEach","subTotals","getSubTotals","text","split","slice","join","ResultRow","color","FormResults","_InvoiceData$getTotal","getTotals","FormResults_ResultRow","FormFooter","FormNavs","leaveInvoice","openPreview","removeInvoice","Hr","ItemData","clone","obj","JSON","parse","stringify","isEmptyObject","o","keys","Boolean","InvoiceForm","metaChangeHandler","cloneItems","includes","itemsChangeHandler","action","addItem","getAttribute","field","updateItem","targetId","removeItem","itemsBlurHandler","trim","isNaN","push","find","prevState","updateHandler","FormOptions_FormOptions","FormHeader_FormHeader","companyTitle","Hr_Hr","FormItems_FormItems","FormResults_FormResults","FormFooter_FormFooter","FormNavs_FormNavs","Menu","setNewInvoiceType","invoiceTypes","newInvoice","typeSelected","defaultValue","List","sort","sortBy","possibleSorts","sortOrder","invoices","invoicesArray","sortedInvoices","firstEl","secondEl","b","replace","localeDateFormat","navigator","language","moment","valueOf","setFilter","filterBy","formatClientName","filters","_this2","sortableStyle","cursor","userSelect","paddingTop","data-sortby","selectInvoice","firstLine","Invoice","updateInvoice","currentInvoiceWasUpdated","currentInvoice","newInvoiceType","count","countInvoices","showForm","updateLocalForage","saveChanges","showPreview","hidePreview","storage","_","error","loadFromLocalForage","InvoicePreview_InvoicePreview","Menu_Menu","List_List","InvoiceForm_InvoiceForm","App","Invoice_Invoice","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e6b9b8ea.chunk.js","sourcesContent":["import React from 'react';\n\nexport const PreviewMenu = ({ closePreview, filename, objectUrl }) => {\n  return (\n    <div className=\"preview-toolbar no-print\">\n      <div className=\"columns\">\n        <div className=\"column is-12\" style={{ paddingBottom: 0 }}>\n          <div className=\"level\">\n            <div className=\"level-left\">\n              <div className=\"level-item\">\n                <button\n                  className=\"button is-dark is-outlined\"\n                  onClick={closePreview}>\n                  <span className=\"icon is-small\">\n                    <i className=\"fas fa-arrow-left\"></i>\n                  </span>\n                  <span>Retour</span>\n                </button>\n              </div>\n              <div className=\"level-item\">\n                <a\n                  href={objectUrl}\n                  download={filename}\n                  className={`button is-link is-outlined ${!filename ? 'is-loading' : ''}`}>\n                  <span className=\"icon is-small\">\n                    <i className=\"fas fa-file-pdf\"></i>\n                  </span>\n                  <span>Télecharger</span>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <hr />\n    </div>\n  )\n}","import React, { Component } from 'react';\n\nimport * as axios from 'axios';\n\nimport { PreviewMenu } from './PreviewMenu';\n\nexport class InvoicePreview extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filename: null,\n      objectUrl: null\n    }\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    if (!this.state.filename) {\n      this.embedPdf();\n    }\n  }\n\n  embedPdf = () => {\n    const invoice = this.props.invoice;\n    axios.post('/api/html2pdf', { data: invoice }, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/pdf'\n      },\n      responseType: \"blob\"\n    }).then(res => {\n      const filename = `${invoice.type}-${invoice.meta.number}.pdf`;\n      const blob = new Blob([res.data], { type: 'application/pdf' });\n      const objectUrl = window.URL.createObjectURL(blob);\n      this.setState({ filename, objectUrl });\n    }).catch(err => {\n      console.log(err);\n    })\n  }\n\n  render() {\n\n    return (\n      <div className=\"container\">\n        <PreviewMenu\n          closePreview={this.props.closePreview}\n          filename={this.state.filename}\n          objectUrl={this.state.objectUrl} />\n        <div className=\"columns is-multiline\">\n          {\n            this.state.filename &&\n            <object\n              id=\"mediaObject\"\n              data={this.state.objectUrl}\n              type=\"application/pdf\"\n              name={this.state.filename}>\n              alt: <a\n                href={this.state.objectUrl}\n                download={this.state.filename}>{this.state.filename}</a>\n            </object>\n          }\n        </div>\n      </div>\n    )\n  }\n}","import React from 'react';\n\nimport './form.css';\n\nexport const Input = ({ name, id, value, changeHandler, ...domProps }) => {\n  return (\n    <div className=\"control\">\n      <input\n        id={id}\n        name={name}\n        type=\"text\"\n        className=\"input\"\n        onChange={changeHandler ? changeHandler : (e) => { }}\n        value={value}\n        {...domProps} />\n    </div>\n  )\n}\n\nexport const Textarea = ({ name, id, value, changeHandler, ...domProps }) => {\n  return (\n    <div className=\"control\">\n      <textarea\n        className=\"textarea\"\n        name={name}\n        id={id}\n        onChange={changeHandler ? changeHandler : (e) => { }}\n        value={value}\n        {...domProps}></textarea>\n    </div>\n  )\n}\n\nexport const Select = ({ name, value, changeHandler, tabs, ...domProps }) => {\n  return (\n    <div className=\"select is-fullwidth\">\n      <select\n        name={name}\n        value={value}\n        onChange={changeHandler}\n        {...domProps}>\n        {\n          tabs.map((tab, index) => {\n            return (\n              <option\n                key={`options-${index}`}\n                value={tab.value}>{tab.label}</option>\n            )\n          })\n        }\n      </select>\n    </div>\n  )\n}\n\nexport const Label = ({ target, label, icon }) => {\n  return (\n    <label\n      htmlFor={target}\n      className=\"label\">\n      <span className=\"icon is-small has-text-info\">\n        <i className={`fas fa-${icon}`}></i>\n      </span>\n      <span>{` ${label}`}</span>\n    </label>\n  )\n}\n\nexport const File = ({ name, label }) => {\n  return (\n    <div className=\"file has-name is-fullwidth\">\n      <label className=\"file-label\">\n        <input\n          className=\"file-input\"\n          type=\"file\"\n          name={name} />\n        <span className=\"file-cta\">\n          <span className=\"file-icon\">\n            <i className=\"fas fa-upload\"></i>\n          </span>\n          <span className=\"file-label\">{label}</span>\n        </span>\n        <span className=\"file-name\"></span>\n      </label>\n    </div>\n  )\n}\n\n","import React from 'react';\n\nimport { Select } from '../../form'\n\nexport const FormOptions = ({\n  options,\n  optionsChangeHandler,\n  types,\n  type,\n  typeChangeHandler\n}) => {\n  return (\n    <div className=\"level\">\n      <div className=\"level-left\">\n        <div className=\"level-item\">\n          <div className=\"field is-horizontal\">\n            <div className=\"field-label is-normal\">\n              <label className=\"label\">Formulaire</label>\n            </div>\n            <div className=\"field-body\">\n              <div className=\"field\">\n                <div className=\"control is-expanded\">\n                  <Select\n                    name=\"input-type\"\n                    value={type}\n                    changeHandler={typeChangeHandler}\n                    tabs={types.map(type => ({ value: type, label: type }))} />\n                </div>\n              </div>\n              <div className=\"field\">\n                <div className=\"control is-expanded\">\n                  <Select\n                    name=\"input-detailed\"\n                    value={options.detailed}\n                    changeHandler={optionsChangeHandler}\n                    tabs={[\n                      { value: 'false', label: 'Simple' },\n                      { value: 'true', label: 'Détaillé' },\n                    ]} />\n                </div>\n              </div>\n              <div className=\"field\">\n                <div className=\"control is-expanded\">\n                  <Select\n                    name=\"input-withTaxes\"\n                    value={options.withTaxes}\n                    changeHandler={optionsChangeHandler}\n                    tabs={[\n                      { value: 'false', label: 'Sans Taxes' },\n                      { value: 'true', label: 'Avec Taxes' },\n                    ]} />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"level-right\"></div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Input, Textarea, Label, File } from '../../form';\n\nexport const FormHeader = ({ from, to, number, date, changeHandler, type }) => {\n  return (\n    <div className=\"columns is-multiline\">\n      <div className=\"column is-6\">\n        <div className=\"field\">\n          <Label\n            target=\"input-from\"\n            label=\"De\"\n            icon=\"home\" />\n          <Textarea\n            name=\"input-from\"\n            id=\"input-from\"\n            changeHandler={changeHandler}\n            value={from} />\n        </div>\n      </div>\n      <div className=\"column is-6\">\n        <div className=\"field\">\n          <Label\n            target=\"\"\n            label=\"Logo\"\n            icon=\"image\" />\n          <File name=\"file-input\" label=\"Ajouter une image\" />\n        </div>\n      </div>\n      <div className=\"column is-6\">\n        <div className=\"field\">\n          <Label\n            target=\"input-to\"\n            label=\"Facturé à\"\n            icon=\"handshake\" />\n          <Textarea\n            name=\"input-to\"\n            id=\"input-to\"\n            changeHandler={changeHandler}\n            value={to} />\n        </div>\n      </div>\n      <div className=\"column is-6\">\n        <div className=\"columns is-multiline\">\n          {/* Field: Number */}\n          <div className=\"column is-12\">\n            <div className=\"field\">\n              <Label\n                target=\"input-number\"\n                label={`${type} n°`}\n                icon=\"search\" />\n              <Input\n                name=\"input-number\"\n                id=\"input-number\"\n                changeHandler={changeHandler}\n                value={number} />\n            </div>\n          </div>\n          <div className=\"column is-12\">\n            <div className=\"field\">\n              <Label\n                target=\"input-date\"\n                label=\"Date\"\n                icon=\"calendar-day\" />\n              <Input\n                name=\"input-date\"\n                id=\"input-date\"\n                changeHandler={changeHandler}\n                value={date} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Label } from '../../../form/';\n\nexport const Headings = ({ detailed, withTaxes }) => {\n  // Filter the headings to display\n  // depending on the Invoice options\n  const headings = [\n    { detailedOnly: true, withTaxesOnly: false, label: 'Qté', icon: 'sort-amount-up', size: 1 },\n    { detailedOnly: false, withTaxesOnly: false, label: 'Désignation', icon: 'tag', size: detailed ? 4 : 6 },\n    { detailedOnly: false, withTaxesOnly: false, label: `Prix${detailed ? ' Unit.' : ''}${withTaxes ? ' HT' : ''}`, icon: 'euro-sign', size: 2 },\n    { detailedOnly: true, withTaxesOnly: false, label: `${'Montant'}${withTaxes ? ' HT' : ''}`, icon: 'euro-sign', size: 2 },\n    { detailedOnly: false, withTaxesOnly: true, label: 'TVA', icon: 'percentage', size: detailed ? 2 : 3 },\n  ].filter(heading => {\n    return (!heading.detailedOnly || (heading.detailedOnly && detailed))\n      && (!heading.withTaxesOnly || (heading.withTaxesOnly && withTaxes));\n  });\n  return (\n    <div className=\"column is-12\">\n      <div className=\"columns\">\n        {\n          headings.map((heading, index) => {\n            return (\n              <div\n                className={`column is-${heading.size}`}\n                key={`item-heading-${index}`}>\n                <Label icon={heading.icon} label={heading.label} />\n              </div>\n            )\n          })\n        }\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Textarea, Input } from '../../../form';\n\nexport const Item = ({\n  detailed,\n  withTax,\n  data,\n  changeHandler,\n  blurHandler\n}) => {\n  return (\n    // Items are childs of ItemsList\n    // Each item is displayed in a full row within the ItemsList container\n    <div className=\"column is-12 animated fadeIn fast\">\n      <div className=\"columns\">\n        {/* ---------------------------------------------- */}\n        {/* quantity field */}\n        {\n          detailed &&\n          <div className=\"column is-1\">\n            <Input\n              data-id={`${data.id}`}\n              data-field={`quantity`}\n              value={data.quantity}\n              changeHandler={(e) => { changeHandler(e, 'update') }}\n              onBlur={blurHandler} />\n          </div>\n        }\n        {/* ---------------------------------------------- */}\n        {/* title field */}\n        <div className={`column is-${detailed ? '4' : '6'}`}>\n          <Textarea\n            data-id={`${data.id}`}\n            data-field={`title`}\n            value={data.title}\n            changeHandler={(e) => { changeHandler(e, 'update') }}\n            onBlur={blurHandler} />\n        </div>\n        {/* ---------------------------------------------- */}\n        {/* price field */}\n        <div className=\"column is-2\">\n          <Input\n            data-id={`${data.id}`}\n            data-field={`price`}\n            value={data.price}\n            changeHandler={(e) => { changeHandler(e, 'update') }}\n            onBlur={blurHandler} />\n        </div>\n        {/* ---------------------------------------------- */}\n        {/* total(quantity * price) field, display only */}\n        {\n          detailed &&\n          <div className=\"column is-2\">\n            <Input\n              disabled\n              value={(data.quantity * data.price).toFixed(2)}\n              changeHandler={(e) => { }} />\n          </div>\n        }\n        {/* ---------------------------------------------- */}\n        {/* tax field */}\n        {\n          withTax &&\n          <div className=\"column is-2\">\n            <Input\n              data-id={`${data.id}`}\n              data-field={`tax`}\n              value={data.tax}\n              changeHandler={(e) => { changeHandler(e, 'update') }}\n              onBlur={blurHandler} />\n          </div>\n        }\n        {/* ---------------------------------------------- */}\n        {/* delete item button */}\n        <div className=\"column is-1\">\n          <button\n            data-id={`${data.id}`}\n            onClick={(e) => changeHandler(e, 'remove')}\n            className=\"button is-danger is-fullwidth\">\n            <span\n              data-id={`${data.id}`}\n              className=\"icon\">\n              <i\n                data-id={`${data.id}`}\n                className=\"fas fa-times\"></i>\n            </span>\n          </button>\n        </div>\n        {/* ---------------------------------------------- */}\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Headings } from './Headings';\nimport { Item } from './Item';\n\nexport const FormItems = ({\n  detailed,\n  withTaxes,\n  changeHandler,\n  blurHandler,\n  items\n}) => {\n  return (\n    <div className=\"columns is-multiline\">\n      <Headings\n        detailed={detailed}\n        withTaxes={withTaxes} />\n      {\n        items.map(item => {\n          return (\n            <Item\n              key={item.id}\n              data={item}\n              changeHandler={changeHandler}\n              detailed={detailed}\n              withTax={withTaxes}\n              blurHandler={blurHandler}\n            />\n          )\n        })\n      }\n      <div className=\"column is-12\">\n        <button\n          onClick={(e) => changeHandler(e, 'add')}\n          className=\"button is-link is-fullwidth\">\n          <span className=\"icon\">\n            <i className=\"fas fa-plus\"></i>\n          </span>\n          <span>Ajouter un article</span>\n        </button>\n      </div>\n      {/* ---------------------------------------------- */}\n    </div>\n  )\n}","import * as shortid from 'shortid';\n\nexport class InvoiceData {\n  constructor(props = {}) {\n    this.id = props.id || shortid.generate();\n    this.type = props.type || 'Facture';\n    this.types = ['Facture', 'Devis'];\n    this.items = props.items ? [...props.items] : [];\n    this.meta = props.meta ? { ...props.meta } : {\n      date: (new Date()).toLocaleDateString(),\n      from: '',\n      to: '',\n      number: '',\n      terms: ''\n    };\n    this.options = props.options ? { ...props.options } : {\n      detailed: false,\n      withTaxes: false\n    };\n  }\n  /**\n   * \n   * @param {ItemData} item\n   * @returns {{subTotalTaxExcluded, subTotalTaxIncluded, subTotalTax}} \n   */\n  static getSubTotals(item) {\n    const subTotalTaxExcluded = +item.quantity * +item.price;\n    const subTotalTax = subTotalTaxExcluded * (+item.tax / 100);\n    const subTotalTaxIncluded = subTotalTaxExcluded + subTotalTax;\n    return {\n      subTotalTaxExcluded,\n      subTotalTaxIncluded,\n      subTotalTax\n    }\n  }\n\n  /**\n   * \n   * @param {[ItemData]} items\n   * @returns {{totalTaxExcluded: number, totalTaxIncluded: number, totalTaxes: number}} \n   */\n  static getTotals(items) {\n    let totalTaxIncluded = 0;\n    let totalTaxExcluded = 0;\n    let totalTaxes = 0;\n    if (items.length) {\n      items.forEach(item => {\n        const subTotals = InvoiceData.getSubTotals(item);\n        totalTaxExcluded += subTotals.subTotalTaxExcluded;\n        totalTaxIncluded += subTotals.subTotalTaxIncluded;\n        totalTaxes += subTotals.subTotalTax;\n      });\n    }\n    return {\n      totalTaxExcluded,\n      totalTaxIncluded,\n      totalTaxes\n    };\n  }\n\n  /**\n   * \n   * @param {string} text\n   * @returns {string} \n   */\n  static firstLine(text) {\n    return text.split('\\n')[0];\n  }\n\n  /**\n   * \n   * @param {string} text\n   * @returns {string} \n   */\n  static afterFirstLine(text) {\n    return text.split('\\n').slice(1).join('\\n');\n  }\n}","import React from 'react';\n\nimport { InvoiceData } from '../../../class/InvoiceData';\n\nconst ResultRow = ({ label, value, size, color }) => {\n  return (\n    // Result Row is a child of Results\n    // It is nested within the Result container\n    // It is displayed in a full row\n    <div className=\"column is-12\">\n      <div className={`columns has-text-${color}`}>\n        <div className=\"column is-4\"></div>\n        <div className=\"column is-4 has-text-right\">\n          <span className={`is-size-${size}`}>{label}</span>\n        </div>\n        <div className=\"column is-4 has-text-right\">\n          <span className={`is-size-${size}`}>{value} &euro;</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport const FormResults = ({ withTax, items }) => {\n  const {\n    totalTaxExcluded,\n    totalTaxIncluded,\n    totalTaxes\n  } = InvoiceData.getTotals(items);\n  return (\n    <div className=\"columns is-multiline\">\n      {\n        withTax && <ResultRow\n          label=\"TOTAL HT\"\n          value={totalTaxExcluded.toFixed(2)}\n          size=\"5\"\n          color=\"grey-dark\" />\n      }\n      {\n        withTax && <ResultRow\n          label=\"TVA\"\n          value={totalTaxes.toFixed(2)}\n          size=\"6\"\n          color=\"grey\" />\n      }\n      <ResultRow\n        label={`TOTAL${withTax ? ' TTC' : ''}`}\n        value={totalTaxIncluded.toFixed(2)}\n        size=\"4\"\n        color=\"black-ter\" />\n    </div>\n  )\n}","import React from 'react';\n\nimport { Label, Textarea } from '../../form';\n\nexport const FormFooter = ({ terms, changeHandler }) => {\n  return (\n    <div className=\"columns is-multiline\">\n      <div className=\"column is-12\">\n        <div className=\"field\">\n          <Label\n            target=\"input-terms\"\n            icon=\"building\"\n            label=\"Conditions et modalités de paiement\" />\n          <Textarea\n            name=\"input-terms\"\n            id=\"input-terms\"\n            value={terms}\n            changeHandler={changeHandler} />\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nexport const FormNavs = ({ leaveInvoice, openPreview, removeInvoice }) => {\n  return (\n    <div className=\"level\">\n      <div className=\"level-left\">\n        <div className=\"level-item\">\n          <button\n            onClick={leaveInvoice}\n            className=\"button is-dark\">\n            <span className=\"icon is-small\">\n              <i className=\"fas fa-arrow-left\"></i>\n            </span>\n            <span>Retour</span>\n          </button>\n        </div>\n        <div className=\"level-item\">\n          <button\n            onClick={openPreview}\n            className=\"button is-info\">\n            <span className=\"icon is-small\">\n              <i className=\"fas fa-eye\"></i>\n            </span>\n            <span>Aperçu</span>\n          </button>\n        </div>\n      </div>\n      <div className=\"level-right\">\n        <div className=\"level-item\">\n          <button\n            onClick={removeInvoice}\n            className=\"button is-danger\">\n            <span className=\"icon is-small\">\n              <i className=\"fas fa-trash-alt\"></i>\n            </span>\n            <span>Supprimer</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nexport const Hr = () => {\n  return (\n    // Hr is a horizontal line\n    // It separate two rows\n    // It could be nested within any container\n    // It is displayed in a full row \n    <div className=\"columns no-print\">\n      <div className=\"column is-12\">\n        <hr />\n      </div>\n    </div>\n  )\n}","import * as shortid from 'shortid';\n\nexport class ItemData {\n  constructor(data = { id: null, title: '', price: 0, tax: 0, quantity: 1 }) {\n    this.id = data.id || shortid.generate();\n    this.title = data.title;\n    this.price = data.price;\n    this.tax = data.tax;\n    this.quantity = data.quantity;\n  }\n}","// eslint-disable-next-line\nimport { InvoiceData } from './class/InvoiceData';\n\n/**\n * \n * @param {any} obj \n */\nexport function clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * \n * @param {object} o \n */\nexport function isEmptyObject(o) {\n  let props = 0;\n  Object.keys(o).forEach(key => props++);\n  return !Boolean(props);\n}\n/**\n * \n * @param {[InvoiceData]} invoices \n * @returns {object}\n */\nexport function countInvoices(invoices) {\n  let count = {};\n  Object.keys(invoices).forEach(id => {\n    const invoice = invoices[id];\n    const type = invoice.type;\n    if (type in count) {\n      count[type]++;\n    } else {\n      count[type] = 1;\n    }\n  });\n  return count;\n}","import React, { Component } from 'react';\n\nimport { FormOptions } from './FormOptions';\nimport { FormHeader } from './FormHeader';\nimport { FormItems } from './FormItems';\nimport { FormResults } from './FormResults';\nimport { FormFooter } from './FormFooter';\nimport { FormNavs } from './FormNavs';\nimport { Hr } from '../../elements/Hr';\n\nimport { ItemData } from '../../../class/ItemData';\nimport { clone } from '../../../helpers';\n\nexport class InvoiceForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: null,\n      type: 'Facture',\n      types: ['Facture', 'Devis'],\n      meta: {\n        from: '',\n        to: '',\n        number: '',\n        date: '',\n        terms: ''\n      },\n      options: {\n        detailed: false,\n        withTaxes: false\n      },\n      items: [],\n    }\n    this.state = clone(this.props.invoice);\n  }\n\n  UNSAFE_componentWillReceiveProps(props) {\n    if (props.invoice.id !== this.state.id) {\n      this.setState({ ...clone(props.invoice) });\n    }\n  }\n\n  shouldComponentUpdate(props, state) {\n    if (JSON.stringify(state) === JSON.stringify(this.state)) {\n      return false;\n    }\n    return true;\n  }\n\n  componentDidUpdate(props, prevState) {\n    this.props.updateHandler(clone(this.state));\n  }\n\n  metaChangeHandler = (e) => {\n    const meta = { ...this.state.meta };\n    const name = e.target.name.split('-')[1];\n    meta[name] = e.target.value;\n    this.setState({ meta });\n  }\n\n  optionsChangeHandler = (e) => {\n    const options = { ...this.state.options };\n    const name = e.target.name.split('-')[1];\n    const value = e.target.value === 'true' ? true : false;\n    options[name] = value;\n    const items = this.cloneItems(this.state.items);\n    items.forEach(item => {\n      item.quantity = !options.detailed ? 1 : item.quantity;\n      item.tax = !options.withTaxes ? 0 : item.tax;\n    })\n    this.setState({ options, items });\n  }\n\n  typeChangeHandler = (e) => {\n    const type = e.target.value;\n    if (this.state.types.includes(type)) {\n      this.setState({ type });\n    }\n  }\n\n  itemsChangeHandler = (e, action) => {\n    switch (action) {\n      case 'add':\n        this.addItem();\n        break;\n      case 'update':\n        const id = e.target.getAttribute('data-id');\n        const field = e.target.getAttribute('data-field');\n        const value = e.target.value;\n        this.updateItem(id, field, value);\n        break;\n      case 'remove':\n        const targetId = e.target.getAttribute('data-id');\n        this.removeItem(targetId);\n        break\n      default:\n    }\n  }\n\n  itemsBlurHandler = (e) => {\n    const id = e.target.getAttribute('data-id');\n    const field = e.target.getAttribute('data-field');\n    let value = e.target.value;\n    switch (field) {\n      case 'title':\n        value = value.trim();\n        break;\n      case 'quantity':\n      case 'tax':\n      case 'price':\n        value = !isNaN(value) ? +(+value).toFixed(2) : 0;\n        break;\n      default:\n    }\n    this.updateItem(id, field, value);\n  }\n\n  addItem = () => {\n    let items = this.cloneItems(this.state.items);\n    items.push(new ItemData());\n    this.setState({ items: this.cloneItems(items) });\n  }\n\n  updateItem = (id, field, value) => {\n    const items = this.cloneItems(this.state.items);\n    const item = items.find(data => data.id === id);\n    item[field] = value;\n    this.setState({ items: this.cloneItems(items) });\n  }\n\n  removeItem = (id) => {\n    let items = this.cloneItems(this.state.items);\n    items = items.filter(item => item.id !== id);\n    this.setState({ items: this.cloneItems(items) });\n  }\n\n  cloneItems = (items) => {\n    return items.map(data => new ItemData(data));\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"columns is-multiline\">\n          <div className=\"column is-12\">\n            <div className=\"box animated slideInDown\">\n              <FormOptions\n                type={this.state.type}\n                types={this.state.types}\n                options={this.state.options}\n                optionsChangeHandler={this.optionsChangeHandler}\n                typeChangeHandler={this.typeChangeHandler} />\n            </div>\n          </div>\n          <div className=\"column is-12\">\n            <div className=\"box animated fadeIn\">\n              <FormHeader\n                companyTitle={this.state.companyTitle}\n                type={this.state.type}\n                from={this.state.meta.from}\n                to={this.state.meta.to}\n                number={this.state.meta.number}\n                date={this.state.meta.date}\n                changeHandler={this.metaChangeHandler} />\n              <Hr />\n              <FormItems\n                detailed={this.state.options.detailed}\n                withTaxes={this.state.options.withTaxes}\n                changeHandler={this.itemsChangeHandler}\n                blurHandler={this.itemsBlurHandler}\n                items={this.state.items} />\n              <FormResults\n                withTax={this.state.options.withTaxes}\n                items={this.state.items} />\n              <Hr />\n              <FormFooter\n                terms={this.state.meta.terms}\n                changeHandler={this.metaChangeHandler} />\n            </div>\n          </div>\n          <div className=\"column is-12\">\n            <div className=\"box\">\n              <FormNavs\n                leaveInvoice={this.props.leaveInvoice}\n                openPreview={this.props.openPreview}\n                removeInvoice={this.props.removeInvoice} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}","import React from 'react';\n\nimport { Select } from '../form';\nimport { Hr } from '../elements/Hr';\n\nexport const Menu = ({\n  setNewInvoiceType,\n  invoiceTypes,\n  newInvoice,\n  typeSelected\n}) => {\n  return (\n    <div className=\"container\" >\n      <div className=\"columns\">\n        <div className=\"column is-12\">\n          <div className=\"level\">\n            <div className=\"level-left\"></div>\n            <div className=\"level-right\">\n              <div className=\"level-item\">\n                <div className=\"field has-addons\">\n                  <div className=\"control\">\n                    <button className=\"button is-static\">\n                      Nouveau\n                    </button>\n                  </div>\n                  <div className=\"control is-expanded\">\n                    <Select\n                      onChange={setNewInvoiceType}\n                      defaultValue=''\n                      name=\"newInvoiceType\"\n                      tabs={\n                        invoiceTypes.map(type => {\n                          return { value: type, label: type }\n                        }).concat({ value: '', label: 'Document' })\n                      } />\n                  </div>\n                  <div className=\"control\">\n                    <button\n                      {... (!typeSelected ? { disabled: true } : {})}\n                      onClick={newInvoice}\n                      className={`button is-primary ${typeSelected ? ' animated pulse fast' : ''}`}>\n                      <span className=\"icon is-small\">\n                        <i className=\"fas fa-plus\"></i>\n                      </span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Hr />\n    </div>\n  )\n}","import React, { Component } from 'react';\n\nimport * as moment from 'moment';\n\nimport { Select } from '../form';\n\nimport { InvoiceData } from '../../class/InvoiceData';\nimport { clone } from '../../helpers';\n\nexport class List extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      invoices: clone(this.props.invoices),\n      sortBy: 'number',\n      sortOrder: 'desc',\n      filterBy: ''\n    }\n    this.possibleSorts = ['number', 'date', 'total'];\n    this.filters = (new InvoiceData()).types;\n  }\n\n  sort = (e) => {\n    const sortBy = e.target.getAttribute('data-sortby');\n    if (!sortBy || !this.possibleSorts.includes(sortBy)) {\n      return;\n    }\n    let sortOrder = null;\n    if (this.state.sortBy === sortBy) {\n      sortOrder = this.state.sortOrder === 'desc' ? 'asc' : 'desc';\n    } else {\n      sortOrder = 'desc';\n    }\n    const invoices = clone(this.state.invoices);\n    const invoicesArray = Object.keys(invoices).map(id => (invoices[id]));\n    const sortedInvoices = {};\n    invoicesArray.sort((firstEl, secondEl) => {\n      let a = 0;\n      let b = 0;\n      switch (sortBy) {\n        case 'number':\n          a = firstEl.meta.number.replace(/\\D/g, '');\n          b = secondEl.meta.number.replace(/\\D/g, '');\n          break;\n        case 'date':\n          const lang = navigator.language;\n          let localeDateFormat = 'MM-DD-YYYY';\n          if (lang.includes('fr')) {\n            localeDateFormat = 'DD-MM-YYYY';\n          }\n          a = moment(firstEl.meta.date, localeDateFormat).valueOf();\n          b = moment(secondEl.meta.date, localeDateFormat).valueOf();\n          break;\n        case 'total':\n          a = InvoiceData.getTotals(firstEl.items).totalTaxIncluded;\n          b = InvoiceData.getTotals(secondEl.items).totalTaxIncluded;\n          break;\n        default:\n      }\n      if (sortOrder === 'desc') {\n        return b - a;\n      } else if (sortOrder === 'asc') {\n        return a - b;\n      }\n      return 0;\n    });\n    invoicesArray.forEach(invoice => {\n      sortedInvoices[invoice.id] = invoice;\n    });\n    this.setState({ sortBy, sortOrder, invoices: clone(sortedInvoices) });\n  }\n\n  setFilter = (e) => {\n    const filterBy = e.target.value;\n    this.setState({ filterBy });\n  }\n\n  formatClientName = (text) => {\n    return text.slice(0, 20);\n  }\n\n  render() {\n    const invoices = this.state.invoices;\n    const sortBy = this.state.sortBy;\n    const sortOrder = this.state.sortOrder;\n    const filterBy = this.state.filterBy;\n    const sortableStyle = { cursor: 'pointer', userSelect: 'none' };\n    return (\n      <div className=\"container\">\n        <div className=\"columns\">\n          <div className=\"column is-12\">\n            <div className=\"box\">\n              <table className=\"table is-striped is-hoverable is-fullwidth\">\n                <thead onClick={this.sort}>\n                  <tr>\n                    <th className=\"has-text-centered\">\n                      <span>Client</span>\n                    </th>\n                    <th style={{ paddingTop: '0' }}>\n                      <div className=\"field has-addons\">\n                        <div className=\"control\">\n                          <button className=\"button is-static\">\n                            Type\n                          </button>\n                        </div>\n                        <div className=\"control\">\n                          <Select\n                            value={this.state.filterBy}\n                            onChange={this.setFilter}\n                            tabs={this.filters.map(filter => {\n                              return { label: filter, value: filter }\n                            }).concat({ value: '', label: 'Tout' })} />\n                        </div>\n                      </div>\n                    </th>\n                    <th\n                      data-sortby=\"number\"\n                      style={sortableStyle}>\n                      <span\n                        className={sortBy === 'number' ? 'has-text-link' : ''}\n                        data-sortby=\"number\">\n                        Nombre\n                      </span>\n                      {\" \"}\n                      <span\n                        data-sortby=\"number\"\n                        className=\"icon is-small has-text-info\">\n                        {\n                          sortBy === 'number' &&\n                          <i\n                            data-sortby=\"number\"\n                            className={`fas fa-sort-numeric-${sortOrder === 'desc' ? 'down' : 'up'}`}></i>\n                        }\n                      </span>\n                    </th>\n                    <th\n                      data-sortby=\"date\"\n                      style={sortableStyle}>\n                      <span\n                        data-sortby=\"date\"\n                        className={sortBy === 'date' ? 'has-text-link' : ''}>\n                        Date\n                      </span>\n                      {\" \"}\n                      <span\n                        data-sortby=\"date\"\n                        className=\"icon is-small has-text-info\">\n                        {\n                          sortBy === 'date' &&\n                          <i\n                            data-sortby=\"date\"\n                            className={`fas fa-sort-numeric-${sortOrder === 'desc' ? 'down' : 'up'}`}></i>\n                        }\n                      </span>\n                    </th>\n                    <th\n                      data-sortby=\"total\"\n                      style={sortableStyle}>\n                      <span\n                        data-sortby=\"total\"\n                        className={sortBy === 'total' ? 'has-text-link' : ''}>\n                        Montant\n                      </span>\n                      {\" \"}\n                      <span\n                        data-sortby=\"total\"\n                        className=\"icon is-small has-text-info\">\n                        {\n                          sortBy === 'total' &&\n                          <i\n                            data-sortby=\"total\"\n                            className={`fas fa-sort-amount-${sortOrder === 'desc' ? 'down' : 'up'}`}></i>\n                        }\n                      </span>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {\n                    Object.keys(invoices).map(id => {\n                      const invoice = invoices[id];\n                      return (\n                        <tr\n                          className={Boolean(filterBy) ? (invoice.type !== filterBy ? 'is-hidden' : '') : ''}\n                          style={{ cursor: 'pointer' }}\n                          onClick={this.props.selectInvoice}\n                          data-id={id}\n                          key={id}>\n                          <td data-id={id}>\n                            {this.formatClientName(InvoiceData.firstLine(invoice.meta.to))}\n                          </td>\n                          <td\n                            data-id={id}\n                            className=\"has-text-centered\">{invoice.type}</td>\n                          <td data-id={id}>{invoice.meta.number}</td>\n                          <td data-id={id}>{invoice.meta.date}</td>\n                          <td data-id={id}>\n                            {\n                              InvoiceData.getTotals(invoice.items)\n                                .totalTaxIncluded\n                                .toFixed(2)\n                            } &euro;\n                          </td>\n                        </tr>\n                      )\n                    })\n                  }\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\n\nimport * as storage from 'localforage';\n\nimport { InvoicePreview } from './InvoicePreview';\nimport { InvoiceForm } from './InvoiceForm';\nimport { Menu } from './Menu';\nimport { List } from './List';\n\nimport { InvoiceData } from '../../class/InvoiceData';\nimport {\n  isEmptyObject,\n  clone,\n  countInvoices,\n} from '../../helpers';\n\nexport class Invoice extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showPreview: false,\n      showForm: false,\n      currentInvoice: null,\n      invoices: {},\n      newInvoiceType: null\n    }\n    this.currentInvoiceWasUpdated = false;\n    this.invoiceTypes = (new InvoiceData()).types;\n  }\n\n  componentDidMount() {\n    if (isEmptyObject(this.state.invoices)) {\n      this.loadFromLocalForage().then(invoices => {\n        if (invoices && typeof invoices === 'object' && !isEmptyObject(invoices)) {\n          this.setState({ invoices: clone(invoices) });\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n    // TODO: GET INVOICES FROM BACKEND DB\n  }\n\n  updateInvoice = (invoice) => {\n    const id = invoice.id;\n    const invoices = clone(this.state.invoices);\n    invoices[id] = clone(invoice);\n    this.currentInvoiceWasUpdated = true;\n    this.setState({ invoices, currentInvoice: clone(invoice) });\n  }\n\n  newInvoice = () => {\n    const invoice = new InvoiceData();\n    if (this.state.newInvoiceType) {\n      invoice.type = this.state.newInvoiceType;\n    }\n    const number = countInvoices(this.state.invoices)[invoice.type] || 0;\n    invoice.meta.number = number + 1;\n    this.setState({ currentInvoice: invoice, showForm: true });\n  }\n\n  setNewInvoiceType = (e) => {\n    const type = e.target.value;\n    if (Boolean(type) && this.invoiceTypes.includes(type)) {\n      this.setState({ newInvoiceType: type });\n    } else {\n      this.setState({ newInvoiceType: null });\n    }\n  }\n\n  selectInvoice = (e) => {\n    const id = e.target.getAttribute('data-id');\n    const invoice = this.state.invoices[id];\n    if (!invoice) {\n      return;\n    }\n    this.setState({\n      currentInvoice: clone(invoice),\n      showForm: true\n    });\n  }\n\n  removeInvoice = () => {\n    const id = this.state.currentInvoice.id;\n    const invoices = clone(this.state.invoices);\n    delete invoices[id];\n    this.setState({\n      invoices,\n      currentInvoice: null,\n      newInvoiceType: null,\n      showForm: false\n    }, () => {\n      this.updateLocalForage();\n    });\n    // TODO: DELETE INVOICE FROM BACKEND DB\n  }\n\n  leaveInvoice = () => {\n    this.saveChanges();\n    this.setState({\n      currentInvoice: null,\n      newInvoiceType: null,\n      showForm: false\n    });\n  }\n\n  openPreview = () => {\n    this.saveChanges();\n    this.setState({ showPreview: true });\n  }\n\n  hidePreview = () => {\n    this.setState({ showPreview: false });\n  }\n\n  updateLocalForage = () => {\n    storage.setItem('invoices', clone(this.state.invoices)).then(_ => {\n      console.log(`LocalForage Updated`);\n    }).catch(err => {\n      console.log('Unable to update localForage\\n');\n      console.error(err);\n    })\n  }\n\n  loadFromLocalForage = () => {\n    return storage.getItem('invoices');\n  }\n\n  saveChanges = () => {\n    if (this.currentInvoiceWasUpdated) {\n      const invoice = clone(this.state.currentInvoice);\n      console.log(invoice);\n      // TODO: PUT INVOICE TO BACKEND DB, UPDATE OR CREATE\n      this.updateLocalForage();\n      this.currentInvoiceWasUpdated = false;\n    }\n  }\n\n  render() {\n    return (\n      <section>\n\n        {\n          this.state.showPreview &&\n          <InvoicePreview\n            closePreview={this.hidePreview}\n            invoice={this.state.currentInvoice} />\n        }\n\n        {\n          !this.state.showPreview &&\n          <div id=\"main\">\n            {/* new document menu*/}\n            {/* Hide when an invoice is selected / created */}\n            {\n              !this.state.showForm &&\n              <Menu\n                typeSelected={Boolean(this.state.newInvoiceType)}\n                invoiceTypes={this.invoiceTypes}\n                setNewInvoiceType={this.setNewInvoiceType}\n                newInvoice={this.newInvoice} />\n            }\n\n            {/* invoices list: select an invoice */}\n            {/* Hide when an invoice is selected / created */}\n            {\n              (!isEmptyObject(this.state.invoices) && !this.state.showForm) &&\n              <List\n                invoices={this.state.invoices}\n                selectInvoice={this.selectInvoice} />\n            }\n\n            {/* invoice form for both edition and new form */}\n            {/* show when an invoice is selected / created */}\n            {\n              this.state.showForm &&\n              <InvoiceForm\n                key={this.state.currentInvoice.id}\n                updateHandler={this.updateInvoice}\n                invoice={this.state.currentInvoice}\n                leaveInvoice={this.leaveInvoice}\n                openPreview={this.openPreview}\n                removeInvoice={this.removeInvoice} />\n            }\n          </div>\n        }\n      </section>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport './App.css';\n\nimport { Invoice } from './components/Invoice';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"section\">\n        <div className=\"container\">\n          <div className=\"columns is-multiline\">\n            <div className=\"column is-12\">\n              <Invoice />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}