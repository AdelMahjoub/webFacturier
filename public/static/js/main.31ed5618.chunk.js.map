{"version":3,"sources":["components/Invoice/InvoicePreview/PreviewMenu.js","class/InvoiceData.js","helpers.js","components/Invoice/InvoicePreview/index.js","components/form/index.js","components/Invoice/InvoiceForm/FormOptions.js","components/Invoice/InvoiceForm/FormHeader.js","components/Invoice/InvoiceForm/FormItems/Headings.js","components/Invoice/InvoiceForm/FormItems/Item.js","components/Invoice/InvoiceForm/FormItems/index.js","components/Invoice/InvoiceForm/FormResults.js","components/Invoice/InvoiceForm/FormFooter.js","components/Invoice/InvoiceForm/FormNavs.js","components/elements/Hr.js","class/ItemData.js","components/Invoice/InvoiceForm/index.js","components/Invoice/Menu.js","components/Invoice/List.js","components/Invoice/index.js","App.js","serviceWorker.js","index.js"],"names":["PreviewMenu","_ref","closePreview","filename","objectUrl","react_default","a","createElement","className","style","paddingBottom","onClick","href","download","concat","InvoiceData","props","arguments","length","undefined","Object","classCallCheck","this","id","shortid","type","types","items","toConsumableArray","meta","objectSpread","date","moment","format","DATE","dueDate","add","from","to","number","terms","options","detailed","withTaxes","locale","navigator","language","createClass","key","value","item","subTotalTaxExcluded","quantity","price","subTotalTax","tax","subTotalTaxIncluded","totalTaxIncluded","totalTaxExcluded","totalTaxes","forEach","subTotals","getSubTotals","text","split","slice","join","clone","obj","JSON","parse","stringify","isEmptyObject","o","keys","Boolean","sortInvoices","invoices","sortBy","sortOrder","data","invoicesArray","map","sortedInvoices","sort","firstEl","secondEl","b","toString","replace","valueOf","getTotals","invoice","InvoicePreview","_Component","_this","possibleConstructorReturn","getPrototypeOf","call","embedPdf","Date","toLocaleDateString","axios","headers","Content-Type","Accept","responseType","then","res","blob","Blob","window","URL","createObjectURL","setState","catch","err","console","log","state","inherits","scrollTo","PreviewMenu_PreviewMenu","name","Component","Input","changeHandler","domProps","objectWithoutProperties","assign","onChange","e","Textarea","_ref2","Select","_ref3","tabs","tab","index","label","Label","_ref4","target","icon","htmlFor","File","_ref5","FormOptions","optionsChangeHandler","typeChangeHandler","form_Select","FormHeader","form_Label","form_Textarea","form_File","rows","form_Input","Headings","headings","detailedOnly","withTaxesOnly","size","filter","heading","Item","withTax","blurHandler","data-id","data-field","onBlur","title","disabled","toFixed","FormItems","Headings_Headings","Item_Item","ResultRow","color","FormResults","_InvoiceData$getTotal","FormResults_ResultRow","FormFooter","FormNavs","leaveInvoice","openPreview","removeInvoice","Hr","ItemData","InvoiceForm","metaChangeHandler","cloneItems","includes","itemsChangeHandler","action","addItem","getAttribute","field","updateItem","targetId","removeItem","itemsBlurHandler","trim","isNaN","push","find","prevState","updateHandler","scroll","FormOptions_FormOptions","FormHeader_FormHeader","companyTitle","Hr_Hr","FormItems_FormItems","FormResults_FormResults","FormFooter_FormFooter","FormNavs_FormNavs","Menu","setNewInvoiceType","invoiceTypes","newInvoice","typeSelected","defaultValue","List","possibleSorts","setFilter","filterBy","search","searchTerm","matchedInvoices","clientMatch","toLowerCase","dateMacth","numberMatch","totalMatch","fixCellWidths","formatClientName","minCellWidths","cellClass","document","getElementsByClassName","cell","clientWidth","minWidth","clientCell","typeCell","numberCell","dateCell","totalCell","filters","_this2","serachTerm","sortableStyle","cursor","userSelect","placeholder","paddingTop","data-sortby","selectInvoice","firstLine","Invoice","updateInvoice","currentInvoiceWasUpdated","currentInvoice","newInvoiceType","count","countInvoices","showForm","updateLocalForage","saveChanges","showPreview","hidePreview","storage","_","error","loadFromLocalForage","InvoicePreview_InvoicePreview","Menu_Menu","List_List","InvoiceForm_InvoiceForm","App","Invoice_Invoice","location","hostname","match","ReactDOM","render","src_App_0","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.31ed5618.chunk.js","sourcesContent":["import React from 'react';\n\nexport const PreviewMenu = ({ closePreview, filename, objectUrl }) => {\n  return (\n    <div className=\"preview-toolbar no-print\">\n      <div className=\"columns\">\n        <div className=\"column is-12\" style={{ paddingBottom: 0 }}>\n          <div className=\"level\">\n            <div className=\"level-left\">\n              <div className=\"level-item\">\n                <button\n                  className=\"button is-dark is-outlined\"\n                  onClick={closePreview}>\n                  <span className=\"icon is-small\">\n                    <i className=\"fas fa-arrow-left\"></i>\n                  </span>\n                  <span>Retour</span>\n                </button>\n              </div>\n              <div className=\"level-item\">\n                <a\n                  href={objectUrl}\n                  download={filename}\n                  className={`button is-link is-outlined ${!filename ? 'is-loading' : ''}`}>\n                  <span className=\"icon is-small\">\n                    <i className=\"fas fa-file-pdf\"></i>\n                  </span>\n                  <span>Télecharger</span>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <hr />\n    </div>\n  )\n}","import * as shortid from 'shortid';\n\nimport * as moment from 'moment';\n\nexport class InvoiceData {\n  constructor(props = {}) {\n    this.id = props.id || shortid.generate();\n    this.type = props.type || 'Facture';\n    this.types = [\n      'Facture',\n      'Devis'\n    ];\n    this.items = props.items ? [...props.items] : [];\n    this.meta = props.meta ? { ...props.meta } : {\n      date: moment().format(moment.HTML5_FMT.DATE),\n      dueDate: moment().add(30, 'days').format(moment.HTML5_FMT.DATE),\n      from: '',\n      to: '',\n      number: '',\n      terms: ''\n    };\n    this.options = props.options ? { ...props.options } : {\n      detailed: false,\n      withTaxes: false\n    };\n    this.locale = navigator.language;\n  }\n  /**\n   * \n   * @param {ItemData} item\n   * @returns {{subTotalTaxExcluded, subTotalTaxIncluded, subTotalTax}} \n   */\n  static getSubTotals(item) {\n    const subTotalTaxExcluded = +item.quantity * +item.price;\n    const subTotalTax = subTotalTaxExcluded * (+item.tax / 100);\n    const subTotalTaxIncluded = subTotalTaxExcluded + subTotalTax;\n    return {\n      subTotalTaxExcluded,\n      subTotalTaxIncluded,\n      subTotalTax\n    }\n  }\n\n  /**\n   * \n   * @param {[ItemData]} items\n   * @returns {{totalTaxExcluded: number, totalTaxIncluded: number, totalTaxes: number}} \n   */\n  static getTotals(items) {\n    let totalTaxIncluded = 0;\n    let totalTaxExcluded = 0;\n    let totalTaxes = 0;\n    if (items.length) {\n      items.forEach(item => {\n        const subTotals = InvoiceData.getSubTotals(item);\n        totalTaxExcluded += subTotals.subTotalTaxExcluded;\n        totalTaxIncluded += subTotals.subTotalTaxIncluded;\n        totalTaxes += subTotals.subTotalTax;\n      });\n    }\n    return {\n      totalTaxExcluded,\n      totalTaxIncluded,\n      totalTaxes\n    };\n  }\n\n  /**\n   * \n   * @param {string} text\n   * @returns {string} \n   */\n  static firstLine(text) {\n    return text.split('\\n')[0];\n  }\n\n  /**\n   * \n   * @param {string} text\n   * @returns {string} \n   */\n  static afterFirstLine(text) {\n    return text.split('\\n').slice(1).join('\\n');\n  }\n}","// eslint-disable-next-line\nimport { InvoiceData } from './class/InvoiceData';\n\nimport * as moment from 'moment';\n\n/**\n * \n * @param {any} obj \n */\nexport function clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * \n * @param {object} o \n */\nexport function isEmptyObject(o) {\n  let props = 0;\n  Object.keys(o).forEach(key => props++);\n  return !Boolean(props);\n}\n/**\n * \n * @param {[InvoiceData]} invoices \n * @returns {object}\n */\nexport function countInvoices(invoices) {\n  let count = {};\n  Object.keys(invoices).forEach(id => {\n    const invoice = invoices[id];\n    const type = invoice.type;\n    if (type in count) {\n      count[type]++;\n    } else {\n      count[type] = 1;\n    }\n  });\n  return count;\n}\n\n/**\n * \n * @param {{InvoiceData}} invoices \n * @param {string} sortBy \n * @param {string} sortOrder\n * @returns {{InvoiceData}} \n */\nexport function sortInvoices(invoices, sortBy, sortOrder) {\n  const data = clone(invoices)\n  const invoicesArray = Object.keys(data).map(id => (data[id]));\n  const sortedInvoices = {};\n  invoicesArray.sort((firstEl, secondEl) => {\n    let a = 0;\n    let b = 0;\n    switch (sortBy) {\n      case 'number':\n        a = firstEl.meta.number\n          .toString()\n          .replace(/\\D/g, '');\n        b = secondEl.meta.number\n          .toString()\n          .replace(/\\D/g, '');\n        break;\n      case 'date':\n        a = moment(firstEl.meta.date, moment.HTML5_FMT.DATE).valueOf();\n        b = moment(secondEl.meta.date, moment.HTML5_FMT.DATE).valueOf();\n        break;\n      case 'total':\n        a = InvoiceData.getTotals(firstEl.items).totalTaxIncluded;\n        b = InvoiceData.getTotals(secondEl.items).totalTaxIncluded;\n        break;\n      default:\n    }\n    if (sortOrder === 'desc') {\n      return b - a;\n    } else if (sortOrder === 'asc') {\n      return a - b;\n    }\n    return 0;\n  });\n  invoicesArray.forEach(invoice => {\n    sortedInvoices[invoice.id] = invoice;\n  });\n  return sortedInvoices;\n}","import React, { Component } from 'react';\n\nimport * as axios from 'axios';\n\nimport { PreviewMenu } from './PreviewMenu';\n\nimport { clone } from '../../../helpers';\n\nexport class InvoicePreview extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filename: null,\n      objectUrl: null\n    }\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    if (!this.state.filename) {\n      this.embedPdf();\n    }\n  }\n\n  embedPdf = () => {\n    const invoice = clone(this.props.invoice);\n    if (Boolean(invoice.meta.date)) {\n      invoice.meta.date = (new Date(invoice.meta.date)).toLocaleDateString();\n    }\n    if (Boolean(invoice.meta.dueDate)) {\n      invoice.meta.dueDate = (new Date(invoice.meta.dueDate)).toLocaleDateString();\n    }\n    axios.post('/api/html2pdf', { data: invoice }, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/pdf'\n      },\n      responseType: \"blob\"\n    }).then(res => {\n      const filename = `${invoice.type}-${invoice.meta.number}.pdf`;\n      const blob = new Blob([res.data], { type: 'application/pdf' });\n      const objectUrl = window.URL.createObjectURL(blob);\n      this.setState({ filename, objectUrl });\n    }).catch(err => {\n      console.log(err);\n    })\n  }\n\n  render() {\n\n    return (\n      <div className=\"container\">\n        <PreviewMenu\n          closePreview={this.props.closePreview}\n          filename={this.state.filename}\n          objectUrl={this.state.objectUrl} />\n        <div className=\"columns is-multiline\">\n          {\n            this.state.filename &&\n            <object\n              id=\"mediaObject\"\n              data={this.state.objectUrl}\n              type=\"application/pdf\"\n              name={this.state.filename}>\n              alt: <a\n                href={this.state.objectUrl}\n                download={this.state.filename}>{this.state.filename}</a>\n            </object>\n          }\n        </div>\n      </div>\n    )\n  }\n}","import React from 'react';\n\nimport './form.css';\n\nexport const Input = ({ name, id, value, changeHandler, ...domProps }) => {\n  return (\n    <div className=\"control\">\n      <input\n        id={id}\n        name={name}\n        type=\"text\"\n        className=\"input\"\n        onChange={changeHandler ? changeHandler : (e) => { }}\n        value={value}\n        {...domProps} />\n    </div>\n  )\n}\n\nexport const Textarea = ({ name, id, value, changeHandler, ...domProps }) => {\n  return (\n    <div className=\"control\">\n      <textarea\n        className=\"textarea\"\n        name={name}\n        id={id}\n        onChange={changeHandler ? changeHandler : (e) => { }}\n        value={value}\n        {...domProps}></textarea>\n    </div>\n  )\n}\n\nexport const Select = ({ name, value, changeHandler, tabs, ...domProps }) => {\n  return (\n    <div className=\"select is-fullwidth\">\n      <select\n        name={name}\n        value={value}\n        onChange={changeHandler}\n        {...domProps}>\n        {\n          tabs.map((tab, index) => {\n            return (\n              <option\n                key={`options-${index}`}\n                value={tab.value}>{tab.label}</option>\n            )\n          })\n        }\n      </select>\n    </div>\n  )\n}\n\nexport const Label = ({ target, label, icon }) => {\n  return (\n    <label\n      htmlFor={target}\n      className=\"label\">\n      <span className=\"icon is-small has-text-info\">\n        <i className={`fas fa-${icon}`}></i>\n      </span>\n      <span>{` ${label}`}</span>\n    </label>\n  )\n}\n\nexport const File = ({ name, label }) => {\n  return (\n    <div className=\"file has-name is-fullwidth\">\n      <label className=\"file-label\">\n        <input\n          className=\"file-input\"\n          type=\"file\"\n          name={name} />\n        <span className=\"file-cta\">\n          <span className=\"file-icon\">\n            <i className=\"fas fa-upload\"></i>\n          </span>\n          <span className=\"file-label\">{label}</span>\n        </span>\n        <span className=\"file-name\"></span>\n      </label>\n    </div>\n  )\n}\n\n","import React from 'react';\n\nimport { Select } from '../../form'\n\nexport const FormOptions = ({\n  options,\n  optionsChangeHandler,\n  types,\n  type,\n  typeChangeHandler\n}) => {\n  return (\n    <div className=\"level\">\n      <div className=\"level-left\">\n        <div className=\"level-item\">\n          <div className=\"field is-horizontal\">\n            <div className=\"field-label is-normal\">\n              <label className=\"label\">Formulaire</label>\n            </div>\n            <div className=\"field-body\">\n              <div className=\"field\">\n                <div className=\"control is-expanded\">\n                  <Select\n                    name=\"input-type\"\n                    value={type}\n                    changeHandler={typeChangeHandler}\n                    tabs={types.map(type => ({ value: type, label: type }))} />\n                </div>\n              </div>\n              <div className=\"field\">\n                <div className=\"control is-expanded\">\n                  <Select\n                    name=\"input-detailed\"\n                    value={options.detailed}\n                    changeHandler={optionsChangeHandler}\n                    tabs={[\n                      { value: 'false', label: 'Simple' },\n                      { value: 'true', label: 'Détaillé' },\n                    ]} />\n                </div>\n              </div>\n              <div className=\"field\">\n                <div className=\"control is-expanded\">\n                  <Select\n                    name=\"input-withTaxes\"\n                    value={options.withTaxes}\n                    changeHandler={optionsChangeHandler}\n                    tabs={[\n                      { value: 'false', label: 'Sans Taxes' },\n                      { value: 'true', label: 'Avec Taxes' },\n                    ]} />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"level-right\"></div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Input, Textarea, Label, File } from '../../form';\n\nexport const FormHeader = ({\n  from,\n  to,\n  number,\n  date,\n  dueDate,\n  changeHandler,\n  type\n}) => {\n  return (\n    <div className=\"columns is-multiline\">\n      <div className=\"column is-6\">\n        <div className=\"field\">\n          <Label\n            target=\"input-from\"\n            label=\"De\"\n            icon=\"home\" />\n          <Textarea\n            name=\"input-from\"\n            id=\"input-from\"\n            changeHandler={changeHandler}\n            value={from} />\n        </div>\n      </div>\n      <div className=\"column is-6\">\n        <div className=\"field\">\n          <Label\n            target=\"\"\n            label=\"Logo\"\n            icon=\"image\" />\n          <File name=\"file-input\" label=\"Ajouter une image\" />\n        </div>\n      </div>\n      <div className=\"column is-6\">\n        <div className=\"field\">\n          <Label\n            target=\"input-to\"\n            label=\"Facturé à\"\n            icon=\"handshake\" />\n          <Textarea\n            style={{ paddingBottom: 0 }}\n            name=\"input-to\"\n            id=\"input-to\"\n            changeHandler={changeHandler}\n            value={to}\n            rows=\"8\" />\n        </div>\n      </div>\n      <div className=\"column is-6\">\n        <div className=\"columns is-multiline\">\n          {/* Field: Number */}\n          <div className=\"column is-12\">\n            <div className=\"field\">\n              <Label\n                target=\"input-number\"\n                label={`${type} n°`}\n                icon=\"search\" />\n              <Input\n                name=\"input-number\"\n                id=\"input-number\"\n                changeHandler={changeHandler}\n                value={number} />\n            </div>\n          </div>\n          <div className=\"column is-12\">\n            <div className=\"field\">\n              <Label\n                target=\"input-date\"\n                label=\"Date\"\n                icon=\"calendar-day\" />\n              <Input\n                type=\"date\"\n                name=\"input-date\"\n                id=\"input-date\"\n                changeHandler={changeHandler}\n                value={date} />\n            </div>\n          </div>\n          <div className=\"column is-12\">\n            <div className=\"field\">\n              <Label\n                target=\"input-dueDate\"\n                label=\"Echéance\"\n                icon=\"calendar-day\" />\n              <Input\n                type=\"date\"\n                name=\"input-dueDate\"\n                id=\"input-dueDate\"\n                changeHandler={changeHandler}\n                value={dueDate} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Label } from '../../../form/';\n\nexport const Headings = ({ detailed, withTaxes }) => {\n  // Filter the headings to display\n  // depending on the Invoice options\n  const headings = [\n    { detailedOnly: true, withTaxesOnly: false, label: 'Qté', icon: 'sort-amount-up', size: 1 },\n    { detailedOnly: false, withTaxesOnly: false, label: 'Désignation', icon: 'tag', size: detailed ? 4 : 6 },\n    { detailedOnly: false, withTaxesOnly: false, label: `Prix${detailed ? ' Unit.' : ''}${withTaxes ? ' HT' : ''}`, icon: 'euro-sign', size: 2 },\n    { detailedOnly: true, withTaxesOnly: false, label: `${'Montant'}${withTaxes ? ' HT' : ''}`, icon: 'euro-sign', size: 2 },\n    { detailedOnly: false, withTaxesOnly: true, label: 'TVA', icon: 'percentage', size: detailed ? 2 : 3 },\n  ].filter(heading => {\n    return (!heading.detailedOnly || (heading.detailedOnly && detailed))\n      && (!heading.withTaxesOnly || (heading.withTaxesOnly && withTaxes));\n  });\n  return (\n    <div className=\"column is-12\">\n      <div className=\"columns\">\n        {\n          headings.map((heading, index) => {\n            return (\n              <div\n                className={`column is-${heading.size}`}\n                key={`item-heading-${index}`}>\n                <Label icon={heading.icon} label={heading.label} />\n              </div>\n            )\n          })\n        }\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Textarea, Input } from '../../../form';\n\nexport const Item = ({\n  detailed,\n  withTax,\n  data,\n  changeHandler,\n  blurHandler\n}) => {\n  return (\n    // Items are childs of ItemsList\n    // Each item is displayed in a full row within the ItemsList container\n    <div className=\"column is-12 animated fadeIn fast\">\n      <div className=\"columns\">\n        {/* ---------------------------------------------- */}\n        {/* quantity field */}\n        {\n          detailed &&\n          <div className=\"column is-1\">\n            <Input\n              data-id={`${data.id}`}\n              data-field={`quantity`}\n              value={data.quantity}\n              changeHandler={(e) => { changeHandler(e, 'update') }}\n              onBlur={blurHandler} />\n          </div>\n        }\n        {/* ---------------------------------------------- */}\n        {/* title field */}\n        <div className={`column is-${detailed ? '4' : '6'}`}>\n          <Textarea\n            data-id={`${data.id}`}\n            data-field={`title`}\n            value={data.title}\n            changeHandler={(e) => { changeHandler(e, 'update') }}\n            onBlur={blurHandler} />\n        </div>\n        {/* ---------------------------------------------- */}\n        {/* price field */}\n        <div className=\"column is-2\">\n          <Input\n            data-id={`${data.id}`}\n            data-field={`price`}\n            value={data.price}\n            changeHandler={(e) => { changeHandler(e, 'update') }}\n            onBlur={blurHandler} />\n        </div>\n        {/* ---------------------------------------------- */}\n        {/* total(quantity * price) field, display only */}\n        {\n          detailed &&\n          <div className=\"column is-2\">\n            <Input\n              disabled\n              value={(data.quantity * data.price).toFixed(2)}\n              changeHandler={(e) => { }} />\n          </div>\n        }\n        {/* ---------------------------------------------- */}\n        {/* tax field */}\n        {\n          withTax &&\n          <div className=\"column is-2\">\n            <Input\n              data-id={`${data.id}`}\n              data-field={`tax`}\n              value={data.tax}\n              changeHandler={(e) => { changeHandler(e, 'update') }}\n              onBlur={blurHandler} />\n          </div>\n        }\n        {/* ---------------------------------------------- */}\n        {/* delete item button */}\n        <div className=\"column is-1\">\n          <button\n            data-id={`${data.id}`}\n            onClick={(e) => changeHandler(e, 'remove')}\n            className=\"button is-danger is-fullwidth\">\n            <span\n              data-id={`${data.id}`}\n              className=\"icon\">\n              <i\n                data-id={`${data.id}`}\n                className=\"fas fa-times\"></i>\n            </span>\n          </button>\n        </div>\n        {/* ---------------------------------------------- */}\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nimport { Headings } from './Headings';\nimport { Item } from './Item';\n\nexport const FormItems = ({\n  detailed,\n  withTaxes,\n  changeHandler,\n  blurHandler,\n  items\n}) => {\n  return (\n    <div className=\"columns is-multiline\">\n      <Headings\n        detailed={detailed}\n        withTaxes={withTaxes} />\n      {\n        items.map(item => {\n          return (\n            <Item\n              key={item.id}\n              data={item}\n              changeHandler={changeHandler}\n              detailed={detailed}\n              withTax={withTaxes}\n              blurHandler={blurHandler}\n            />\n          )\n        })\n      }\n      <div className=\"column is-12\">\n        <button\n          onClick={(e) => changeHandler(e, 'add')}\n          className=\"button is-link is-fullwidth\">\n          <span className=\"icon\">\n            <i className=\"fas fa-plus\"></i>\n          </span>\n          <span>Ajouter un article</span>\n        </button>\n      </div>\n      {/* ---------------------------------------------- */}\n    </div>\n  )\n}","import React from 'react';\n\nimport { InvoiceData } from '../../../class/InvoiceData';\n\nconst ResultRow = ({ label, value, size, color }) => {\n  return (\n    // Result Row is a child of Results\n    // It is nested within the Result container\n    // It is displayed in a full row\n    <div className=\"column is-12\">\n      <div className={`columns has-text-${color}`}>\n        <div className=\"column is-4\"></div>\n        <div className=\"column is-4 has-text-right\">\n          <span className={`is-size-${size}`}>{label}</span>\n        </div>\n        <div className=\"column is-4 has-text-right\">\n          <span className={`is-size-${size}`}>{value} &euro;</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport const FormResults = ({ withTax, items }) => {\n  const {\n    totalTaxExcluded,\n    totalTaxIncluded,\n    totalTaxes\n  } = InvoiceData.getTotals(items);\n  return (\n    <div className=\"columns is-multiline\">\n      {\n        withTax && <ResultRow\n          label=\"TOTAL HT\"\n          value={totalTaxExcluded.toFixed(2)}\n          size=\"5\"\n          color=\"grey-dark\" />\n      }\n      {\n        withTax && <ResultRow\n          label=\"TVA\"\n          value={totalTaxes.toFixed(2)}\n          size=\"6\"\n          color=\"grey\" />\n      }\n      <ResultRow\n        label={`TOTAL${withTax ? ' TTC' : ''}`}\n        value={totalTaxIncluded.toFixed(2)}\n        size=\"4\"\n        color=\"black-ter\" />\n    </div>\n  )\n}","import React from 'react';\n\nimport { Label, Textarea } from '../../form';\n\nexport const FormFooter = ({ terms, changeHandler }) => {\n  return (\n    <div className=\"columns is-multiline\">\n      <div className=\"column is-12\">\n        <div className=\"field\">\n          <Label\n            target=\"input-terms\"\n            icon=\"building\"\n            label=\"Conditions et modalités de paiement\" />\n          <Textarea\n            name=\"input-terms\"\n            id=\"input-terms\"\n            value={terms}\n            changeHandler={changeHandler} />\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nexport const FormNavs = ({ leaveInvoice, openPreview, removeInvoice }) => {\n  return (\n    <div className=\"level\">\n      <div className=\"level-left\">\n        <div className=\"level-item\">\n          <button\n            onClick={leaveInvoice}\n            className=\"button is-dark\">\n            <span className=\"icon is-small\">\n              <i className=\"fas fa-arrow-left\"></i>\n            </span>\n            <span>Retour</span>\n          </button>\n        </div>\n        <div className=\"level-item\">\n          <button\n            onClick={openPreview}\n            className=\"button is-info\">\n            <span className=\"icon is-small\">\n              <i className=\"fas fa-eye\"></i>\n            </span>\n            <span>Aperçu</span>\n          </button>\n        </div>\n      </div>\n      <div className=\"level-right\">\n        <div className=\"level-item\">\n          <button\n            onClick={removeInvoice}\n            className=\"button is-danger\">\n            <span className=\"icon is-small\">\n              <i className=\"fas fa-trash-alt\"></i>\n            </span>\n            <span>Supprimer</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\n\nexport const Hr = () => {\n  return (\n    // Hr is a horizontal line\n    // It separate two rows\n    // It could be nested within any container\n    // It is displayed in a full row \n    <div className=\"columns no-print\">\n      <div className=\"column is-12\">\n        <hr />\n      </div>\n    </div>\n  )\n}","import * as shortid from 'shortid';\n\nexport class ItemData {\n  constructor(data = { id: null, title: '', price: 0, tax: 0, quantity: 1 }) {\n    this.id = data.id || shortid.generate();\n    this.title = data.title;\n    this.price = data.price;\n    this.tax = data.tax;\n    this.quantity = data.quantity;\n  }\n}","import React, { Component } from 'react';\n\nimport { FormOptions } from './FormOptions';\nimport { FormHeader } from './FormHeader';\nimport { FormItems } from './FormItems';\nimport { FormResults } from './FormResults';\nimport { FormFooter } from './FormFooter';\nimport { FormNavs } from './FormNavs';\nimport { Hr } from '../../elements/Hr';\n\nimport { ItemData } from '../../../class/ItemData';\nimport { clone } from '../../../helpers';\n\nexport class InvoiceForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: null,\n      type: 'Facture',\n      types: ['Facture', 'Devis'],\n      meta: {\n        from: '',\n        to: '',\n        number: '',\n        date: '',\n        dueDate: '',\n        terms: ''\n      },\n      options: {\n        detailed: false,\n        withTaxes: false\n      },\n      items: [],\n    }\n    this.state = clone(this.props.invoice);\n  }\n\n  UNSAFE_componentWillReceiveProps(props) {\n    if (props.invoice.id !== this.state.id) {\n      this.setState({ ...clone(props.invoice) });\n    }\n  }\n\n  shouldComponentUpdate(props, state) {\n    if (JSON.stringify(state) === JSON.stringify(this.state)) {\n      return false;\n    }\n    return true;\n  }\n\n  componentDidUpdate(props, prevState) {\n    this.props.updateHandler(clone(this.state));\n  }\n\n  componentDidMount() {\n    window.scroll(0, 0); \n  }\n\n  metaChangeHandler = (e) => {\n    const meta = { ...this.state.meta };\n    const name = e.target.name.split('-')[1];\n    meta[name] = e.target.value;\n    this.setState({ meta });\n  }\n\n  optionsChangeHandler = (e) => {\n    const options = { ...this.state.options };\n    const name = e.target.name.split('-')[1];\n    const value = e.target.value === 'true' ? true : false;\n    options[name] = value;\n    const items = this.cloneItems(this.state.items);\n    items.forEach(item => {\n      item.quantity = !options.detailed ? 1 : item.quantity;\n      item.tax = !options.withTaxes ? 0 : item.tax;\n    })\n    this.setState({ options, items });\n  }\n\n  typeChangeHandler = (e) => {\n    const type = e.target.value;\n    if (this.state.types.includes(type)) {\n      this.setState({ type });\n    }\n  }\n\n  itemsChangeHandler = (e, action) => {\n    switch (action) {\n      case 'add':\n        this.addItem();\n        break;\n      case 'update':\n        const id = e.target.getAttribute('data-id');\n        const field = e.target.getAttribute('data-field');\n        const value = e.target.value;\n        this.updateItem(id, field, value);\n        break;\n      case 'remove':\n        const targetId = e.target.getAttribute('data-id');\n        this.removeItem(targetId);\n        break\n      default:\n    }\n  }\n\n  itemsBlurHandler = (e) => {\n    const id = e.target.getAttribute('data-id');\n    const field = e.target.getAttribute('data-field');\n    let value = e.target.value;\n    switch (field) {\n      case 'title':\n        value = value.trim();\n        break;\n      case 'quantity':\n      case 'tax':\n      case 'price':\n        value = !isNaN(value) ? +(+value).toFixed(2) : 0;\n        break;\n      default:\n    }\n    this.updateItem(id, field, value);\n  }\n\n  addItem = () => {\n    let items = this.cloneItems(this.state.items);\n    items.push(new ItemData());\n    this.setState({ items: this.cloneItems(items) });\n  }\n\n  updateItem = (id, field, value) => {\n    const items = this.cloneItems(this.state.items);\n    const item = items.find(data => data.id === id);\n    item[field] = value;\n    this.setState({ items: this.cloneItems(items) });\n  }\n\n  removeItem = (id) => {\n    let items = this.cloneItems(this.state.items);\n    items = items.filter(item => item.id !== id);\n    this.setState({ items: this.cloneItems(items) });\n  }\n\n  cloneItems = (items) => {\n    return items.map(data => new ItemData(data));\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"columns is-multiline\">\n          <div className=\"column is-12\">\n            <div className=\"box animated slideInDown\">\n              <FormOptions\n                type={this.state.type}\n                types={this.state.types}\n                options={this.state.options}\n                optionsChangeHandler={this.optionsChangeHandler}\n                typeChangeHandler={this.typeChangeHandler} />\n            </div>\n          </div>\n          <div className=\"column is-12\">\n            <div className=\"box animated fadeIn\">\n              <FormHeader\n                companyTitle={this.state.companyTitle}\n                type={this.state.type}\n                from={this.state.meta.from}\n                to={this.state.meta.to}\n                number={this.state.meta.number}\n                date={this.state.meta.date}\n                dueDate={this.state.meta.dueDate}\n                changeHandler={this.metaChangeHandler} />\n              <Hr />\n              <FormItems\n                detailed={this.state.options.detailed}\n                withTaxes={this.state.options.withTaxes}\n                changeHandler={this.itemsChangeHandler}\n                blurHandler={this.itemsBlurHandler}\n                items={this.state.items} />\n              <FormResults\n                withTax={this.state.options.withTaxes}\n                items={this.state.items} />\n              <Hr />\n              <FormFooter\n                terms={this.state.meta.terms}\n                changeHandler={this.metaChangeHandler} />\n            </div>\n          </div>\n          <div className=\"column is-12\">\n            <div className=\"box\">\n              <FormNavs\n                leaveInvoice={this.props.leaveInvoice}\n                openPreview={this.props.openPreview}\n                removeInvoice={this.props.removeInvoice} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}","import React from 'react';\n\nimport { Select } from '../form';\nimport { Hr } from '../elements/Hr';\n\nexport const Menu = ({\n  setNewInvoiceType,\n  invoiceTypes,\n  newInvoice,\n  typeSelected\n}) => {\n  return (\n    <div className=\"container\" >\n      <div className=\"columns\">\n        <div className=\"column is-12\">\n          <div className=\"level\">\n            <div className=\"level-left\"></div>\n            <div className=\"level-right\">\n              <div className=\"level-item\">\n                <div className=\"field has-addons\">\n                  <div className=\"control\">\n                    <button className=\"button is-static\">\n                      Nouveau\n                    </button>\n                  </div>\n                  <div className=\"control is-expanded\">\n                    <Select\n                      onChange={setNewInvoiceType}\n                      defaultValue=''\n                      name=\"newInvoiceType\"\n                      tabs={\n                        invoiceTypes.map(type => {\n                          return { value: type, label: type }\n                        }).concat({ value: '', label: 'Document' })\n                      } />\n                  </div>\n                  <div className=\"control\">\n                    <button\n                      {... (!typeSelected ? { disabled: true } : {})}\n                      onClick={newInvoice}\n                      className={`button is-primary ${typeSelected ? ' animated pulse fast' : ''}`}>\n                      <span className=\"icon is-small\">\n                        <i className=\"fas fa-plus\"></i>\n                      </span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Hr />\n    </div>\n  )\n}","import React, { Component } from 'react';\n\nimport { Select } from '../form';\n\nimport { InvoiceData } from '../../class/InvoiceData';\nimport {\n  clone,\n  sortInvoices\n} from '../../helpers';\n\nexport class List extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      invoices: sortInvoices(this.props.invoices, 'date', 'desc'),\n      sortBy: 'date',\n      sortOrder: 'desc',\n      filterBy: '',\n      searchTerm: ''\n    }\n    this.minCellWidths = {\n      clientCell: 0,\n      typeCell: 0,\n      numberCell: 0,\n      dateCell: 0,\n      totalCell: 0\n    }\n    this.possibleSorts = ['number', 'date', 'total'];\n    this.filters = (new InvoiceData()).types;\n  }\n\n  componentDidMount() {\n    this.fixCellWidths();\n  }\n\n  sort = (e) => {\n    const sortBy = e.target.getAttribute('data-sortby');\n    if (!sortBy || !this.possibleSorts.includes(sortBy)) {\n      return;\n    }\n    let sortOrder = null;\n    if (this.state.sortBy === sortBy) {\n      sortOrder = this.state.sortOrder === 'desc' ? 'asc' : 'desc';\n    } else {\n      sortOrder = 'desc';\n    }\n    const invoices = sortInvoices(this.state.invoices, sortBy, sortOrder);\n    this.setState({ sortBy, sortOrder, invoices });\n  }\n\n  setFilter = (e) => {\n    const filterBy = e.target.value;\n    this.setState({ filterBy });\n  }\n\n  search = (e) => {\n    const searchTerm = e.target.value;\n    const invoices = clone(this.props.invoices);\n    const invoicesArray = Object.keys(invoices).map(id => (invoices[id]));\n    const matchedInvoices = {};\n    invoicesArray.forEach(invoice => {\n      const clientMatch = invoice.meta.to\n        .toLowerCase()\n        .includes(searchTerm.toLowerCase());\n      const dateMacth = (new Date(invoice.meta.date).toLocaleDateString())\n        .includes(searchTerm);\n      const numberMatch = `${invoice.meta.number}`.includes(searchTerm);\n      const totalMatch = InvoiceData.getTotals(invoice.items)\n        .totalTaxIncluded\n        .toFixed(2)\n        .includes(searchTerm);\n      if (clientMatch\n        || dateMacth\n        || numberMatch\n        || totalMatch) {\n        matchedInvoices[invoice.id] = invoice;\n      }\n    });\n    this.setState({\n      searchTerm,\n      invoices: sortInvoices(matchedInvoices, this.state.sortBy, this.state.sortOrder)\n    }, () => {\n      this.fixCellWidths();\n    });\n  }\n\n  formatClientName = (text) => {\n    return text.slice(0, 20);\n  }\n\n  fixCellWidths = () => {\n    Object.keys(this.minCellWidths).forEach(cellClass => {\n      [...document.getElementsByClassName(cellClass)].forEach(cell => {\n        const clientWidth = cell.clientWidth;\n        if (this.minCellWidths[cellClass] < clientWidth) {\n          this.minCellWidths[cellClass] = clientWidth;\n        }\n      });\n    });\n    Object.keys(this.minCellWidths).forEach(cellClass => {\n      [...document.getElementsByClassName(cellClass)].forEach(cell => {\n        cell.style.minWidth = this.minCellWidths[cellClass] + 'px';\n      });\n    });\n  }\n\n  render() {\n    const invoices = this.state.invoices;\n    const sortBy = this.state.sortBy;\n    const sortOrder = this.state.sortOrder;\n    const filterBy = this.state.filterBy;\n    const serachTerm = this.state.searchTerm;\n    const sortableStyle = { cursor: 'pointer', userSelect: 'none' };\n    return (\n      <div className=\"container\">\n        <div className=\"columns is-multiline\">\n          {/* Search field */}\n          <div className=\"column is-12\">\n            <div className=\"level\">\n              <div className=\"level-left\">\n                <div className=\"level-item\">\n                  <div className=\"field has-addons\">\n                    <div className=\"control\">\n                      <button className=\"button is-static\">\n                        Recherche\n                      </button>\n                    </div>\n                    <div className=\"control has-icons-right\">\n                      <input\n                        className=\"input\"\n                        type=\"text\"\n                        value={serachTerm}\n                        onChange={this.search}\n                        placeholder=\"par client, adresse, numéro, etc...\" />\n                      <span className=\"icon is-small is-right\">\n                        <i className=\"fas fa-search\"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          {/* Invoices list */}\n          <div className=\"column is-12\">\n            <div className=\"box\">\n              <div className=\"table-container\">\n                <table className=\"table is-striped is-hoverable is-fullwidth\">\n                  <thead onClick={this.sort}>\n                    <tr>\n                      <th className=\"has-text-centered\">\n                        <span>Client</span>\n                      </th>\n                      <th style={{ paddingTop: '0' }}>\n                        <div className=\"field has-addons\">\n                          <div className=\"control\">\n                            <button className=\"button is-static\">\n                              Type\n                          </button>\n                          </div>\n                          <div className=\"control\">\n                            <Select\n                              value={this.state.filterBy}\n                              onChange={this.setFilter}\n                              tabs={this.filters.map(filter => {\n                                return { label: filter, value: filter }\n                              }).concat({ value: '', label: 'Tout' })} />\n                          </div>\n                        </div>\n                      </th>\n                      <th\n                        data-sortby=\"number\"\n                        style={sortableStyle}>\n                        <span\n                          className={sortBy === 'number' ? 'has-text-link' : ''}\n                          data-sortby=\"number\">\n                          Nombre\n                      </span>\n                        {\" \"}\n                        <span\n                          data-sortby=\"number\"\n                          className=\"icon is-small has-text-info\">\n                          {\n                            sortBy === 'number' &&\n                            <i\n                              data-sortby=\"number\"\n                              className={`fas fa-sort-numeric-${sortOrder === 'desc' ? 'down' : 'up'}`}></i>\n                          }\n                        </span>\n                      </th>\n                      <th\n                        data-sortby=\"date\"\n                        style={sortableStyle}>\n                        <span\n                          data-sortby=\"date\"\n                          className={sortBy === 'date' ? 'has-text-link' : ''}>\n                          Date\n                      </span>\n                        {\" \"}\n                        <span\n                          data-sortby=\"date\"\n                          className=\"icon is-small has-text-info\">\n                          {\n                            sortBy === 'date' &&\n                            <i\n                              data-sortby=\"date\"\n                              className={`fas fa-sort-numeric-${sortOrder === 'desc' ? 'down' : 'up'}`}></i>\n                          }\n                        </span>\n                      </th>\n                      <th\n                        data-sortby=\"total\"\n                        style={sortableStyle}>\n                        <span\n                          data-sortby=\"total\"\n                          className={sortBy === 'total' ? 'has-text-link' : ''}>\n                          Montant\n                      </span>\n                        {\" \"}\n                        <span\n                          data-sortby=\"total\"\n                          className=\"icon is-small has-text-info\">\n                          {\n                            sortBy === 'total' &&\n                            <i\n                              data-sortby=\"total\"\n                              className={`fas fa-sort-amount-${sortOrder === 'desc' ? 'down' : 'up'}`}></i>\n                          }\n                        </span>\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {\n                      Object.keys(invoices).map(id => {\n                        const invoice = invoices[id];\n                        return (\n                          <tr\n                            className={Boolean(filterBy) ? (invoice.type !== filterBy ? 'is-hidden' : '') : ''}\n                            style={{ cursor: 'pointer' }}\n                            onClick={this.props.selectInvoice}\n                            data-id={id}\n                            key={id}>\n                            <td\n                              data-id={id}\n                              className=\"clientCell\">\n                              {this.formatClientName(InvoiceData.firstLine(invoice.meta.to))}\n                            </td>\n                            <td\n                              data-id={id}\n                              className=\"has-text-centered typeCell\">\n                              {invoice.type}\n                            </td>\n                            <td\n                              className=\"numberCell\"\n                              data-id={id}>{invoice.meta.number}</td>\n                            <td\n                              className=\"dateCell\"\n                              data-id={id}>\n                              {(new Date(invoice.meta.date)).toLocaleDateString()}\n                            </td>\n                            <td\n                              className=\"totalCell\"\n                              data-id={id}>\n                              {\n                                InvoiceData.getTotals(invoice.items)\n                                  .totalTaxIncluded\n                                  .toFixed(2)\n                              } &euro;\n                          </td>\n                          </tr>\n                        )\n                      })\n                    }\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\n\nimport * as storage from 'localforage';\n\nimport { InvoicePreview } from './InvoicePreview';\nimport { InvoiceForm } from './InvoiceForm';\nimport { Menu } from './Menu';\nimport { List } from './List';\n\nimport { InvoiceData } from '../../class/InvoiceData';\nimport {\n  isEmptyObject,\n  clone,\n  countInvoices,\n} from '../../helpers';\n\nexport class Invoice extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showPreview: false,\n      showForm: false,\n      currentInvoice: null,\n      invoices: {},\n      newInvoiceType: null\n    }\n    this.currentInvoiceWasUpdated = false;\n    this.invoiceTypes = (new InvoiceData()).types;\n  }\n\n  componentDidMount() {\n    if (isEmptyObject(this.state.invoices)) {\n      this.loadFromLocalForage().then(invoices => {\n        if (invoices && typeof invoices === 'object' && !isEmptyObject(invoices)) {\n          this.setState({ invoices: clone(invoices) });\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n    // TODO: GET INVOICES FROM BACKEND DB\n  }\n\n  updateInvoice = (invoice) => {\n    const id = invoice.id;\n    const invoices = clone(this.state.invoices);\n    invoices[id] = clone(invoice);\n    this.currentInvoiceWasUpdated = true;\n    this.setState({ invoices, currentInvoice: clone(invoice) });\n  }\n\n  newInvoice = () => {\n    const invoice = new InvoiceData();\n    if (this.state.newInvoiceType) {\n      invoice.type = this.state.newInvoiceType;\n    }\n    const number = countInvoices(this.state.invoices)[invoice.type] || 0;\n    invoice.meta.number = number + 1;\n    this.setState({ currentInvoice: invoice, showForm: true });\n  }\n\n  setNewInvoiceType = (e) => {\n    const type = e.target.value;\n    if (Boolean(type) && this.invoiceTypes.includes(type)) {\n      this.setState({ newInvoiceType: type });\n    } else {\n      this.setState({ newInvoiceType: null });\n    }\n  }\n\n  selectInvoice = (e) => {\n    const id = e.target.getAttribute('data-id');\n    const invoice = this.state.invoices[id];\n    if (!invoice) {\n      return;\n    }\n    this.setState({\n      currentInvoice: clone(invoice),\n      showForm: true\n    });\n  }\n\n  removeInvoice = () => {\n    const id = this.state.currentInvoice.id;\n    const invoices = clone(this.state.invoices);\n    delete invoices[id];\n    this.setState({\n      invoices,\n      currentInvoice: null,\n      newInvoiceType: null,\n      showForm: false\n    }, () => {\n      this.updateLocalForage();\n    });\n    // TODO: DELETE INVOICE FROM BACKEND DB\n  }\n\n  leaveInvoice = () => {\n    this.saveChanges();\n    this.setState({\n      currentInvoice: null,\n      newInvoiceType: null,\n      showForm: false\n    });\n  }\n\n  openPreview = () => {\n    this.saveChanges();\n    this.setState({ showPreview: true });\n  }\n\n  hidePreview = () => {\n    this.setState({ showPreview: false });\n  }\n\n  updateLocalForage = () => {\n    storage.setItem('invoices', clone(this.state.invoices)).then(_ => {\n      console.log(`LocalForage Updated`);\n    }).catch(err => {\n      console.log('Unable to update localForage\\n');\n      console.error(err);\n    })\n  }\n\n  loadFromLocalForage = () => {\n    return storage.getItem('invoices');\n  }\n\n  saveChanges = () => {\n    if (this.currentInvoiceWasUpdated) {\n      const invoice = clone(this.state.currentInvoice);\n      console.log(invoice);\n      // TODO: PUT INVOICE TO BACKEND DB, UPDATE OR CREATE\n      this.updateLocalForage();\n      this.currentInvoiceWasUpdated = false;\n    }\n  }\n\n  render() {\n    return (\n      <section>\n\n        {\n          this.state.showPreview &&\n          <InvoicePreview\n            closePreview={this.hidePreview}\n            invoice={this.state.currentInvoice} />\n        }\n\n        {\n          !this.state.showPreview &&\n          <div id=\"main\">\n            {/* new document menu*/}\n            {/* Hide when an invoice is selected / created */}\n            {\n              !this.state.showForm &&\n              <Menu\n                typeSelected={Boolean(this.state.newInvoiceType)}\n                invoiceTypes={this.invoiceTypes}\n                setNewInvoiceType={this.setNewInvoiceType}\n                newInvoice={this.newInvoice} />\n            }\n\n            {/* invoices list: select an invoice */}\n            {/* Hide when an invoice is selected / created */}\n            {\n              (!isEmptyObject(this.state.invoices) && !this.state.showForm) &&\n              <List\n                invoices={this.state.invoices}\n                selectInvoice={this.selectInvoice} />\n            }\n\n            {/* invoice form for both edition and new form */}\n            {/* show when an invoice is selected / created */}\n            {\n              this.state.showForm &&\n              <InvoiceForm\n                key={this.state.currentInvoice.id}\n                updateHandler={this.updateInvoice}\n                invoice={this.state.currentInvoice}\n                leaveInvoice={this.leaveInvoice}\n                openPreview={this.openPreview}\n                removeInvoice={this.removeInvoice} />\n            }\n          </div>\n        }\n      </section>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport './App.css';\n\nimport { Invoice } from './components/Invoice';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"section\">\n        <div className=\"container\">\n          <div className=\"columns is-multiline\">\n            <div className=\"column is-12\">\n              <Invoice />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}